<!DOCTYPE html><html lang="en" class="h-full"><head><meta charSet="utf-8"/><title>Use Rust to create a Shopify Discount Function</title><meta name="description" content="Get familiar with Shopify Functions by creating a volume based discount, written in Rust."/><meta name="viewport" content="width=device-width,initial-scale=1"/><meta property="og:type" content="website"/><meta property="og:image" content="https://workshops.shopify.dev/social-share-preview.jpg"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:image" content="https://workshops.shopify.dev/social-share-preview.jpg"/><meta name="twitter:creator" content="@ShopifyDevs"/><link rel="stylesheet" href="/build/_assets/tailwind-OSF3KDF6.css"/><link rel="stylesheet" href="/build/_assets/workshops-IXG5EJLE.css"/><link rel="stylesheet" href="/build/_assets/agate-YFU2QRW6.css"/></head><body class="h-full bg-slate-50"><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-86JJCZ26ZM"></script><script async="" id="gtag-init">
                window.dataLayer = window.dataLayer || [];
                function gtag(){dataLayer.push(arguments);}
                gtag('js', new Date());
              </script><main><div class="workshop flex h-full w-full flex-row justify-between gap-0"><header class="fixed top-0 left-0 right-0 z-[2] flex flex-row-reverse items-center justify-end bg-white p-4 drop-shadow-md md:justify-between"><div class="hidden md:block timer"><p>50<!-- --> minutes remaining</p></div><h1>Use Rust to create a Shopify Discount Function</h1><button class="btn-icon md:hidden" aria-label="Open step navigation"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="h-6 w-6"><path fill-rule="evenodd" d="M3 6.75A.75.75 0 013.75 6h16.5a.75.75 0 010 1.5H3.75A.75.75 0 013 6.75zM3 12a.75.75 0 01.75-.75h16.5a.75.75 0 010 1.5H3.75A.75.75 0 013 12zm0 5.25a.75.75 0 01.75-.75h16.5a.75.75 0 010 1.5H3.75a.75.75 0 01-.75-.75z" clip-rule="evenodd"></path></svg></button><a class="btn-icon hidden md:block" arial-label="Go back to workshops" href="/"><svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="h-5 w-5"><path d="M19 9H3.661l5.997-5.246a1 1 0 00-1.316-1.506l-8 7c-.008.007-.011.018-.019.025a.975.975 0 00-.177.24c-.018.03-.045.054-.059.087a.975.975 0 000 .802c.014.033.041.057.059.088.05.087.104.17.177.239.008.007.011.018.019.025l8 7a.996.996 0 001.411-.095 1 1 0 00-.095-1.411L3.661 11H19a1 1 0 000-2z"></path></svg></a></header>
<div class="workshop-nav flex shrink-0 flex-col gap-2 bg-slate-50"><a class="flex select-none items-center rounded-md px-4 pb-2 leading-snug md:hidden" href="/"><svg width="8.4" height="12" viewBox="0 0 7 10" fill="none" xmlns="http://www.w3.org/2000/svg" focusable="false" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M5.30326 0.403358C5.108 0.208096 4.79142 0.208096 4.59615 0.403358L1.06062 3.93889L0.353513 4.646C0.158251 4.84126 0.158251 5.15784 0.353513 5.35311L1.06062 6.06021L4.59615 9.59575C4.79142 9.79101 5.108 9.79101 5.30326 9.59575L6.01037 8.88864C6.20563 8.69338 6.20563 8.37679 6.01037 8.18153L2.82839 4.99955L6.01037 1.81757C6.20563 1.62231 6.20563 1.30573 6.01037 1.11046L5.30326 0.403358Z" fill="currentColor"></path></svg><span class="pl-2">Workshops</span></a><hr class="md:hidden"/><div class="flex select-none items-center rounded-md py-4 px-4 leading-snug md:hidden timer"><p>50<!-- --> minutes remaining</p></div><a href="#0" class="flex select-none items-center rounded-md border border-solid border-gray-200 bg-white py-4 px-4 leading-snug font-medium"><span class="mr-4 flex h-6 w-6 flex-none items-center justify-center rounded-full  text-[0.8rem] leading-6 text-white bg-emerald-500">1</span>Before you begin</a><a href="#1" class="flex select-none items-center rounded-md border border-solid border-gray-200 bg-white py-4 px-4 leading-snug "><span class="mr-4 flex h-6 w-6 flex-none items-center justify-center rounded-full  text-[0.8rem] leading-6 text-white bg-slate-400">2</span>What are Shopify Functions?</a><a href="#2" class="flex select-none items-center rounded-md border border-solid border-gray-200 bg-white py-4 px-4 leading-snug "><span class="mr-4 flex h-6 w-6 flex-none items-center justify-center rounded-full  text-[0.8rem] leading-6 text-white bg-slate-400">3</span>Create a new app</a><a href="#3" class="flex select-none items-center rounded-md border border-solid border-gray-200 bg-white py-4 px-4 leading-snug "><span class="mr-4 flex h-6 w-6 flex-none items-center justify-center rounded-full  text-[0.8rem] leading-6 text-white bg-slate-400">4</span>Extend your app with Functions</a><a href="#4" class="flex select-none items-center rounded-md border border-solid border-gray-200 bg-white py-4 px-4 leading-snug "><span class="mr-4 flex h-6 w-6 flex-none items-center justify-center rounded-full  text-[0.8rem] leading-6 text-white bg-slate-400">5</span>Create your function</a><a href="#5" class="flex select-none items-center rounded-md border border-solid border-gray-200 bg-white py-4 px-4 leading-snug "><span class="mr-4 flex h-6 w-6 flex-none items-center justify-center rounded-full  text-[0.8rem] leading-6 text-white bg-slate-400">6</span>Deploy the function</a><a href="#6" class="flex select-none items-center rounded-md border border-solid border-gray-200 bg-white py-4 px-4 leading-snug "><span class="mr-4 flex h-6 w-6 flex-none items-center justify-center rounded-full  text-[0.8rem] leading-6 text-white bg-slate-400">7</span>Add additional access scopes to your app</a><a href="#7" class="flex select-none items-center rounded-md border border-solid border-gray-200 bg-white py-4 px-4 leading-snug "><span class="mr-4 flex h-6 w-6 flex-none items-center justify-center rounded-full  text-[0.8rem] leading-6 text-white bg-slate-400">8</span>Configure your application frontend</a><a href="#8" class="flex select-none items-center rounded-md border border-solid border-gray-200 bg-white py-4 px-4 leading-snug "><span class="mr-4 flex h-6 w-6 flex-none items-center justify-center rounded-full  text-[0.8rem] leading-6 text-white bg-slate-400">9</span>Configure your application backend</a><a href="#9" class="flex select-none items-center rounded-md border border-solid border-gray-200 bg-white py-4 px-4 leading-snug "><span class="mr-4 flex h-6 w-6 flex-none items-center justify-center rounded-full  text-[0.8rem] leading-6 text-white bg-slate-400">10</span>Run the application locally</a><a href="#10" class="flex select-none items-center rounded-md border border-solid border-gray-200 bg-white py-4 px-4 leading-snug "><span class="mr-4 flex h-6 w-6 flex-none items-center justify-center rounded-full  text-[0.8rem] leading-6 text-white bg-slate-400">11</span>Create a discount with the admin menu</a><a href="#11" class="flex select-none items-center rounded-md border border-solid border-gray-200 bg-white py-4 px-4 leading-snug "><span class="mr-4 flex h-6 w-6 flex-none items-center justify-center rounded-full  text-[0.8rem] leading-6 text-white bg-slate-400">12</span>Test the discount</a><a href="#12" class="flex select-none items-center rounded-md border border-solid border-gray-200 bg-white py-4 px-4 leading-snug "><span class="mr-4 flex h-6 w-6 flex-none items-center justify-center rounded-full  text-[0.8rem] leading-6 text-white bg-slate-400">13</span>(Optional) Use GraphiQL call the discount APIs</a><a href="#13" class="flex select-none items-center rounded-md border border-solid border-gray-200 bg-white py-4 px-4 leading-snug "><span class="mr-4 flex h-6 w-6 flex-none items-center justify-center rounded-full  text-[0.8rem] leading-6 text-white bg-slate-400">14</span>Conclusion</a></div><div class="backdrop fixed inset-0"></div>
<div class="slider-wrapper"><div class="slider-panel"><div class="workshop-step"><section><h2 id="0">Before you begin</h2><p>For the first time ever Shopify is unlocking the ability to customize its business logic, opening the door to huge opportunities for app developers. This workshop will cover how to create a new <a href="https://shopify.dev/api/functions">Functions</a> based discount using Rust. (No previous Rust experience is required as code is provided. Though this workshop will not be covering the basics of the language.) We will start by writing the Function locally, then create a corresponding UI, deploy the function to Shopify, and finally test the discount on a development store.</p><p>By the end of this workshop, attendees will have built a Shopify Function that applies a volume discount at checkout, which they can then use as a basis for their own app. The app we&#x27;re building will have an accompanying UI that allows a merchant to create a volume discount (buy more of a product, get a bigger discount) and a Shopify Function, written in Rust, that applies the discount at checkout.</p><p><img src="/content/images/optimized/functions-volume-discount/create-discount.jpg" alt="An image showing a discount type that was created by a Shopify function."/></p><h3>Learning objectives</h3><p>After you&#x27;ve finished this tutorial, you&#x27;ll have accomplished the following:</p><ul>
<li>Used the <a href="https://shopify.dev/api/discounts">discount React library</a> to build a discount form page</li>
<li>Created a new page in your app where merchants can create a discount</li>
<li>Generated a new product discount extension with boilerplate code</li>
<li>Modified the Shopify Function code to generate the discounts at checkout</li>
<li>Configured your extension</li>
<li>Tested the new discount in your development store</li>
</ul><h3>What you&#x27;ll need (Account Requirements)</h3><ul>
<li>Create a <a href="https://www.shopify.com/partners">Shopify partner account</a></li>
<li>Create a <a href="https://help.shopify.com/en/partners/dashboard/managing-stores/development-stores">development store</a> with <strong>Checkout Extensibility</strong> preview enabled.</li>
<li>Set up the <a href="https://help.shopify.com/en/manual/checkout-settings/test-orders">Bogus Payment Gateway</a></li>
<li><a href="https://help.shopify.com/en/manual/products/add-update-products#add-a-new-product">Add one product</a> to your development store</li>
<li>Sign up for a <a href="https://ngrok.com/">ngrok account</a></li>
</ul><h3>What you&#x27;ll need (Libraries and Tools)</h3><ul>
<li>Install <a href="https://www.rust-lang.org/tools/install">Rust</a> and <a href="https://bytecodealliance.github.io/cargo-wasi/">cargo-wasi</a>.</li>
<li>Install <a href="https://nodejs.org/en/download/">Node</a>.</li>
<li>Installed a Node package manager such as <a href="https://docs.npmjs.com/downloading-and-installing-node-js-and-npm">npm</a>, <a href="https://classic.yarnpkg.com/lang/en/docs/install/#mac-stable">yarn</a>, or <a href="https://pnpm.io/installation">pnpm</a>.</li>
<li>Optionally, install the <a href="https://shopify-graphiql-app.shopifycloud.com/login">Shopify GraphiQL App</a>.</li>
</ul><aside class="callout callout-positive border-green-500 bg-green-50 rounded-md border-l-4  p-4"><dt>Positive</dt><dd>On Windows, Rust requires the <a href="https://docs.microsoft.com/en-us/windows/dev-environment/rust/setup">Microsoft C++ Build Tools</a>. Be sure to select the <em>Desktop development with C++</em> workload when installing them.</dd><dt>Positive</dt><dd>To view the complete source code for this workshop, check out <a href="https://github.com/Shopify/unite-workshop-functions-volume-discount">this repo</a>.</dd></aside></section></div></div><div class="slider-controls"><button class="slider-control btn btn-small btn-tertiary-outline prev shadow-md invisible" disabled="">Back</button><button class="slider-control btn btn-small btn-tertiary next shadow-md ">Next</button></div></div></div></main><script>((STORAGE_KEY, restoreKey) => {
    if (!window.history.state || !window.history.state.key) {
      let key = Math.random().toString(32).slice(2);
      window.history.replaceState({
        key
      }, "");
    }
    try {
      let positions = JSON.parse(sessionStorage.getItem(STORAGE_KEY) || "{}");
      let storedY = positions[restoreKey || window.history.state.key];
      if (typeof storedY === "number") {
        window.scrollTo(0, storedY);
      }
    } catch (error) {
      console.error(error);
      sessionStorage.removeItem(STORAGE_KEY);
    }
  })("positions", null)</script><link rel="modulepreload" href="/build/entry.client-J6TYPMOL.js"/><link rel="modulepreload" href="/build/_shared/chunk-YZBVNK3V.js"/><link rel="modulepreload" href="/build/_shared/chunk-SH7JW3YP.js"/><link rel="modulepreload" href="/build/_shared/chunk-GDLBX7ER.js"/><link rel="modulepreload" href="/build/_shared/chunk-Q3IECNXJ.js"/><link rel="modulepreload" href="/build/_shared/chunk-JOBPDGDE.js"/><link rel="modulepreload" href="/build/_shared/chunk-MV3Y6IQI.js"/><link rel="modulepreload" href="/build/root-TS7GWK7I.js"/><link rel="modulepreload" href="/build/routes/workshops-YWZAAF22.js"/><link rel="modulepreload" href="/build/_shared/chunk-4QTFVEPO.js"/><link rel="modulepreload" href="/build/routes/workshops/$workshopId-TCVFMZD7.js"/><script>window.__remixContext = {"url":"/workshops/functions-volume-discount","state":{"loaderData":{"root":{"trackingEnabled":true},"routes/workshops/$workshopId":{"workshopId":"functions-volume-discount","code":"var Component=(()=\u003e{var p=Object.create;var i=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var N=Object.getPrototypeOf,j=Object.prototype.hasOwnProperty;var y=(n,s)=\u003e()=\u003e(s||n((s={exports:{}}).exports,s),s.exports),g=(n,s)=\u003e{for(var l in s)i(n,l,{get:s[l],enumerable:!0})},t=(n,s,l,c)=\u003e{if(s\u0026\u0026typeof s==\"object\"||typeof s==\"function\")for(let a of u(s))!j.call(n,a)\u0026\u0026a!==l\u0026\u0026i(n,a,{get:()=\u003es[a],enumerable:!(c=m(s,a))||c.enumerable});return n};var f=(n,s,l)=\u003e(l=n!=null?p(N(n)):{},t(s||!n||!n.__esModule?i(l,\"default\",{value:n,enumerable:!0}):l,n)),w=n=\u003et(i({},\"__esModule\",{value:!0}),n);var h=y((A,r)=\u003e{r.exports=_jsx_runtime});var v={};g(v,{default:()=\u003eb,frontmatter:()=\u003e_});var e=f(h()),_={summary:\"Get familiar with Shopify Functions by creating a volume based discount, written in Rust.\",id:\"functions-volume-discount\",status:\"Published\",categories:\"shopify,rust,react\",\"feedback-link\":\"https://github.com/Shopify/workshops\"};function d(n){let s=Object.assign({timer:\"timer\",h1:\"h1\",nav:\"nav\",\"workshop-steps\":\"workshop-steps\",div:\"div\",section:\"section\",h2:\"h2\",p:\"p\",a:\"a\",img:\"img\",h3:\"h3\",ul:\"ul\",li:\"li\",strong:\"strong\",dl:\"dl\",dt:\"dt\",dd:\"dd\",em:\"em\",code:\"code\",pre:\"pre\",span:\"span\",ol:\"ol\"},n.components),l=s[\"workshop-steps\"],{WorkshopHeader:c,WorkshopNavLink:a}=s;return c||o(\"WorkshopHeader\",!0),a||o(\"WorkshopNavLink\",!0),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(c,{children:[(0,e.jsx)(s.timer,{cssClass:\"hidden md:block\",children:'{\"total\":50,\"stepsDuration\":{\"1\":5,\"2\":3,\"3\":2,\"4\":2,\"5\":8,\"6\":3,\"7\":2,\"8\":8,\"9\":5,\"10\":3,\"11\":2,\"12\":2,\"13\":5},\"countDown\":[]}'}),(0,e.jsx)(s.h1,{children:\"Use Rust to create a Shopify Discount Function\"})]}),`\n`,(0,e.jsxs)(s.nav,{children:[(0,e.jsx)(s.timer,{cssClass:\"flex select-none items-center rounded-md py-4 px-4 leading-snug md:hidden\",children:'{\"total\":50,\"stepsDuration\":{\"1\":5,\"2\":3,\"3\":2,\"4\":2,\"5\":8,\"6\":3,\"7\":2,\"8\":8,\"9\":5,\"10\":3,\"11\":2,\"12\":2,\"13\":5},\"countDown\":[]}'}),(0,e.jsx)(a,{stepStr:\"0\",children:\"Before you begin\"}),(0,e.jsx)(a,{stepStr:\"1\",children:\"What are Shopify Functions?\"}),(0,e.jsx)(a,{stepStr:\"2\",children:\"Create a new app\"}),(0,e.jsx)(a,{stepStr:\"3\",children:\"Extend your app with Functions\"}),(0,e.jsx)(a,{stepStr:\"4\",children:\"Create your function\"}),(0,e.jsx)(a,{stepStr:\"5\",children:\"Deploy the function\"}),(0,e.jsx)(a,{stepStr:\"6\",children:\"Add additional access scopes to your app\"}),(0,e.jsx)(a,{stepStr:\"7\",children:\"Configure your application frontend\"}),(0,e.jsx)(a,{stepStr:\"8\",children:\"Configure your application backend\"}),(0,e.jsx)(a,{stepStr:\"9\",children:\"Run the application locally\"}),(0,e.jsx)(a,{stepStr:\"10\",children:\"Create a discount with the admin menu\"}),(0,e.jsx)(a,{stepStr:\"11\",children:\"Test the discount\"}),(0,e.jsx)(a,{stepStr:\"12\",children:\"(Optional) Use GraphiQL call the discount APIs\"}),(0,e.jsx)(a,{stepStr:\"13\",children:\"Conclusion\"})]}),`\n`,(0,e.jsxs)(l,{children:[(0,e.jsx)(s.div,{className:\"workshop-step\",children:(0,e.jsxs)(s.section,{children:[(0,e.jsx)(s.h2,{id:\"0\",children:\"Before you begin\"}),(0,e.jsxs)(s.p,{children:[\"For the first time ever Shopify is unlocking the ability to customize its business logic, opening the door to huge opportunities for app developers. This workshop will cover how to create a new \",(0,e.jsx)(s.a,{href:\"https://shopify.dev/api/functions\",children:\"Functions\"}),\" based discount using Rust. (No previous Rust experience is required as code is provided. Though this workshop will not be covering the basics of the language.) We will start by writing the Function locally, then create a corresponding UI, deploy the function to Shopify, and finally test the discount on a development store.\"]}),(0,e.jsx)(s.p,{children:\"By the end of this workshop, attendees will have built a Shopify Function that applies a volume discount at checkout, which they can then use as a basis for their own app. The app we're building will have an accompanying UI that allows a merchant to create a volume discount (buy more of a product, get a bigger discount) and a Shopify Function, written in Rust, that applies the discount at checkout.\"}),(0,e.jsx)(s.p,{children:(0,e.jsx)(s.img,{src:\"/content/images/optimized/functions-volume-discount/create-discount.jpg\",alt:\"An image showing a discount type that was created by a Shopify function.\"})}),(0,e.jsx)(s.h3,{children:\"Learning objectives\"}),(0,e.jsx)(s.p,{children:\"After you've finished this tutorial, you'll have accomplished the following:\"}),(0,e.jsxs)(s.ul,{children:[`\n`,(0,e.jsxs)(s.li,{children:[\"Used the \",(0,e.jsx)(s.a,{href:\"https://shopify.dev/api/discounts\",children:\"discount React library\"}),\" to build a discount form page\"]}),`\n`,(0,e.jsx)(s.li,{children:\"Created a new page in your app where merchants can create a discount\"}),`\n`,(0,e.jsx)(s.li,{children:\"Generated a new product discount extension with boilerplate code\"}),`\n`,(0,e.jsx)(s.li,{children:\"Modified the Shopify Function code to generate the discounts at checkout\"}),`\n`,(0,e.jsx)(s.li,{children:\"Configured your extension\"}),`\n`,(0,e.jsx)(s.li,{children:\"Tested the new discount in your development store\"}),`\n`]}),(0,e.jsx)(s.h3,{children:\"What you'll need (Account Requirements)\"}),(0,e.jsxs)(s.ul,{children:[`\n`,(0,e.jsxs)(s.li,{children:[\"Create a \",(0,e.jsx)(s.a,{href:\"https://www.shopify.com/partners\",children:\"Shopify partner account\"})]}),`\n`,(0,e.jsxs)(s.li,{children:[\"Create a \",(0,e.jsx)(s.a,{href:\"https://help.shopify.com/en/partners/dashboard/managing-stores/development-stores\",children:\"development store\"}),\" with \",(0,e.jsx)(s.strong,{children:\"Checkout Extensibility\"}),\" preview enabled.\"]}),`\n`,(0,e.jsxs)(s.li,{children:[\"Set up the \",(0,e.jsx)(s.a,{href:\"https://help.shopify.com/en/manual/checkout-settings/test-orders\",children:\"Bogus Payment Gateway\"})]}),`\n`,(0,e.jsxs)(s.li,{children:[(0,e.jsx)(s.a,{href:\"https://help.shopify.com/en/manual/products/add-update-products#add-a-new-product\",children:\"Add one product\"}),\" to your development store\"]}),`\n`,(0,e.jsxs)(s.li,{children:[\"Sign up for a \",(0,e.jsx)(s.a,{href:\"https://ngrok.com/\",children:\"ngrok account\"})]}),`\n`]}),(0,e.jsx)(s.h3,{children:\"What you'll need (Libraries and Tools)\"}),(0,e.jsxs)(s.ul,{children:[`\n`,(0,e.jsxs)(s.li,{children:[\"Install \",(0,e.jsx)(s.a,{href:\"https://www.rust-lang.org/tools/install\",children:\"Rust\"}),\" and \",(0,e.jsx)(s.a,{href:\"https://bytecodealliance.github.io/cargo-wasi/\",children:\"cargo-wasi\"}),\".\"]}),`\n`,(0,e.jsxs)(s.li,{children:[\"Install \",(0,e.jsx)(s.a,{href:\"https://nodejs.org/en/download/\",children:\"Node\"}),\".\"]}),`\n`,(0,e.jsxs)(s.li,{children:[\"Installed a Node package manager such as \",(0,e.jsx)(s.a,{href:\"https://docs.npmjs.com/downloading-and-installing-node-js-and-npm\",children:\"npm\"}),\", \",(0,e.jsx)(s.a,{href:\"https://classic.yarnpkg.com/lang/en/docs/install/#mac-stable\",children:\"yarn\"}),\", or \",(0,e.jsx)(s.a,{href:\"https://pnpm.io/installation\",children:\"pnpm\"}),\".\"]}),`\n`,(0,e.jsxs)(s.li,{children:[\"Optionally, install the \",(0,e.jsx)(s.a,{href:\"https://shopify-graphiql-app.shopifycloud.com/login\",children:\"Shopify GraphiQL App\"}),\".\"]}),`\n`]}),(0,e.jsxs)(s.dl,{children:[(0,e.jsx)(s.dt,{children:\"Positive\"}),(0,e.jsxs)(s.dd,{children:[\"On Windows, Rust requires the \",(0,e.jsx)(s.a,{href:\"https://docs.microsoft.com/en-us/windows/dev-environment/rust/setup\",children:\"Microsoft C++ Build Tools\"}),\". Be sure to select the \",(0,e.jsx)(s.em,{children:\"Desktop development with C++\"}),\" workload when installing them.\"]}),(0,e.jsx)(s.dt,{children:\"Positive\"}),(0,e.jsxs)(s.dd,{children:[\"To view the complete source code for this workshop, check out \",(0,e.jsx)(s.a,{href:\"https://github.com/Shopify/unite-workshop-functions-volume-discount\",children:\"this repo\"}),\".\"]})]})]})}),(0,e.jsx)(s.div,{className:\"workshop-step\",children:(0,e.jsxs)(s.section,{children:[(0,e.jsx)(s.h2,{id:\"1\",children:\"What are Shopify Functions?\"}),(0,e.jsx)(s.p,{children:\"Shopify Functions allow developers to customize the backend logic that powers parts of Shopify. The first place where we will allow you to extend logic is the discounting logic that lives inside of Checkout.\"}),(0,e.jsx)(s.h3,{children:\"How do Shopify Functions work?\"}),(0,e.jsx)(s.p,{children:\"Like a typical function you define an input, write the logic of your function, and then write out the output. Let\\u2019s dissect how each of these work:\"}),(0,e.jsxs)(s.ul,{children:[`\n`,(0,e.jsxs)(s.li,{children:[(0,e.jsx)(s.strong,{children:\"Input:\"}),\" The function input is a subset of the Cart API and is written as a GraphQL query. Functions can also query metafields so you can store necessary data and retrieve it.\"]}),`\n`,(0,e.jsxs)(s.li,{children:[(0,e.jsx)(s.strong,{children:\"Function logic:\"}),\" The function logic can be written in any language that compiles to WebAssembly using WASI for \",(0,e.jsx)(s.code,{children:\"STDIN\"}),\" and \",(0,e.jsx)(s.code,{children:\"STDOUT\"}),\". This approach ensures a low latency experience for buyers and merchants.\"]}),`\n`,(0,e.jsxs)(s.li,{children:[(0,e.jsx)(s.strong,{children:\"Output:\"}),\" The function output is a payload that conforms to a GraphQL schema relevant to the specific domain. You can learn more about specific schemas in the \",(0,e.jsx)(s.a,{href:\"https://shopify.dev/api/functions/reference\",children:\"Functions API reference\"}),\".\"]}),`\n`]}),(0,e.jsx)(s.h3,{children:\"Lifecycle of a Shopify Function\"}),(0,e.jsx)(s.p,{children:\"The following diagram shows an example lifecycle of a Shopify Function:\"}),(0,e.jsxs)(s.ul,{children:[`\n`,(0,e.jsxs)(s.li,{children:[`\n`,(0,e.jsxs)(s.p,{children:[(0,e.jsx)(s.strong,{children:\"App developers\"}),\" create and deploy apps that contain functions.\"]}),`\n`]}),`\n`,(0,e.jsxs)(s.li,{children:[`\n`,(0,e.jsxs)(s.p,{children:[(0,e.jsx)(s.strong,{children:\"Merchants\"}),\" install the app on their Shopify store and configure the function. An API call is made with the function configuration.\"]}),`\n`]}),`\n`,(0,e.jsxs)(s.li,{children:[`\n`,(0,e.jsxs)(s.p,{children:[(0,e.jsx)(s.strong,{children:\"Customers\"}),\" interact with a Shopify store and \",(0,e.jsx)(s.strong,{children:\"Shopify\"}),\" executes the function.\"]}),`\n`]}),`\n`]}),(0,e.jsx)(s.p,{children:\"For example, an app developer might create and deploy an app with a function that defines a new discount type. The merchant can then install the app on their Shopify store and create a new discount from a discount type provided by the app. Shopify executes the function to calculate the discount when a customer adds a product to their cart.\"}),(0,e.jsx)(s.p,{children:\"Shopify Functions are never invoked directly by URL or otherwise. Shopify invokes them as-needed within the customer journey.\"}),(0,e.jsx)(s.p,{children:(0,e.jsx)(s.img,{src:\"/content/images/optimized/functions-volume-discount/create-test-deploy.jpg\",alt:\"A diagram showing the creating and deploying phases in Shopify Functions\"})}),(0,e.jsxs)(s.dl,{children:[(0,e.jsx)(s.dt,{children:\"Positive\"}),(0,e.jsx)(s.dd,{children:\"Apps that contain functions can be distributed to any merchant through the App Store. If you want to build an app with functions for a certain merchant, then the merchant must be on a Shopify Plus plan.\"})]})]})}),(0,e.jsx)(s.div,{className:\"workshop-step\",children:(0,e.jsxs)(s.section,{children:[(0,e.jsx)(s.h2,{id:\"2\",children:\"Create a new app\"}),(0,e.jsxs)(s.p,{children:[\"In this step we'll create a new Shopify app using \",(0,e.jsx)(s.code,{children:\"npm\"}),\".\"]}),(0,e.jsxs)(s.p,{children:[\"Navigate to the directory where you want to create your app. Choose the \",(0,e.jsx)(s.strong,{children:\"node\"}),\" option. Your app will be created in a new subdirectory.\"]}),(0,e.jsx)(s.pre,{children:(0,e.jsx)(s.code,{className:\"hljs language-bash\",children:`npm init @shopify/app@latest\n`})}),(0,e.jsxs)(s.dl,{children:[(0,e.jsx)(s.dt,{children:\"Positive\"}),(0,e.jsxs)(s.dd,{children:[\"For the remainder of this workshop, we'll assume the app is named \",(0,e.jsx)(s.code,{children:\"functions-workshop\"}),\".\"]})]}),(0,e.jsx)(s.p,{children:\"A new app is created, and the Shopify CLI is installed along with all of the dependencies that you need to build Shopify apps.\"})]})}),(0,e.jsx)(s.div,{className:\"workshop-step\",children:(0,e.jsxs)(s.section,{children:[(0,e.jsx)(s.h2,{id:\"3\",children:\"Extend your app with Functions\"}),(0,e.jsxs)(s.p,{children:[\"In this step we'll create a Shopify Function that will apply discounts during checkout. For this Volume discount type, if the customer has more products than the \",(0,e.jsx)(s.strong,{children:\"minimum quantity\"}),\", then you return a \",(0,e.jsx)(s.strong,{children:\"percentage discount\"}),\" for those products.\"]}),(0,e.jsxs)(s.p,{children:[\"From the app's root directory, create an extension named \",(0,e.jsx)(s.code,{children:\"Volume\"}),\", and choose the \",(0,e.jsx)(s.code,{children:\"Rust\"}),\" language option.\"]}),(0,e.jsx)(s.pre,{children:(0,e.jsxs)(s.code,{className:\"hljs language-bash\",children:[\"npm run shopify app generate extension -- --\",(0,e.jsx)(s.span,{className:\"hljs-built_in\",children:\"type\"}),` product_discounts --template rust\n`]})}),(0,e.jsxs)(s.p,{children:[\"This will generate a new directory under \",(0,e.jsx)(s.code,{children:\"functions-workshop\"}),\" called \",(0,e.jsx)(s.code,{children:\"/extensions/volume\"}),\".\"]}),(0,e.jsx)(s.p,{children:\"To ensure that our libraries are setup properly let's try to compile the generated function and build a Wasm module.\"}),(0,e.jsx)(s.pre,{children:(0,e.jsx)(s.code,{className:\"hljs language-bash\",children:`npm run build\n`})}),(0,e.jsx)(s.p,{children:\"You should see a message indicating that the function was built successfully.\"}),(0,e.jsx)(s.pre,{children:(0,e.jsx)(s.code,{className:\"hljs language-text\",children:`volume-test-1    | Building function volume-test-1...\nvolume-test-1    |     Finished release [optimized] target(s) in 0.04s\n`})}),(0,e.jsxs)(s.dl,{children:[(0,e.jsx)(s.dt,{children:\"Positive\"}),(0,e.jsxs)(s.dd,{children:[\"If you encounter any errors, make sure that you've installed \",(0,e.jsx)(s.code,{children:\"Rust\"}),\" and \",(0,e.jsx)(s.code,{children:\"cargo-wasi\"}),\" and configured your environment variables correctly. You can find more information about \",(0,e.jsx)(s.code,{children:\"cargo-wasi\"}),\" see the \",(0,e.jsx)(s.a,{href:\"https://bytecodealliance.github.io/cargo-wasi/\",children:\"Bytecode Alliance Documentation\"}),\". If you're on Windows, make sure you've installed the \",(0,e.jsx)(s.a,{href:\"https://docs.microsoft.com/en-us/windows/dev-environment/rust/setup\",children:\"Microsoft C++ Build Tools\"}),\". If you're on MacOS or Linux, see the \",(0,e.jsx)(s.a,{href:\"https://www.rust-lang.org/en-US/install.html\",children:\"Rust Documentation\"}),\" for more information.\"]})]})]})}),(0,e.jsx)(s.div,{className:\"workshop-step\",children:(0,e.jsxs)(s.section,{children:[(0,e.jsx)(s.h2,{id:\"4\",children:\"Create your function\"}),(0,e.jsx)(s.p,{children:\"In this step we'll configure the function to apply a volume based discount. Each heading will have you edit a different file.\"}),(0,e.jsx)(s.h3,{children:\"input.graphql\"}),(0,e.jsxs)(s.p,{children:[(0,e.jsx)(s.code,{children:\"input.graphql\"}),\" defines the input for the function.\"]}),(0,e.jsx)(s.p,{children:\"In this example we'll need:\"}),(0,e.jsxs)(s.ol,{children:[`\n`,(0,e.jsxs)(s.li,{children:[\"The items in the cart (that's \",(0,e.jsx)(s.code,{children:\"lines\"}),\"),\"]}),`\n`,(0,e.jsxs)(s.li,{children:[\"The product (\",(0,e.jsx)(s.code,{children:\"merchandise.id\"}),\"),\"]}),`\n`,(0,e.jsxs)(s.li,{children:[\"How many of said product (\",(0,e.jsx)(s.code,{children:\"quantity\"}),\"), and\"]}),`\n`,(0,e.jsxs)(s.li,{children:[\"The configuration of the discount, this could be 10% off on 2 items, or 30% off on 3 items, or any other combination (\",(0,e.jsx)(s.code,{children:\"metafield.value\"}),\").\"]}),`\n`]}),(0,e.jsxs)(s.p,{children:[\"Replace the \",(0,e.jsx)(s.code,{children:\"input.graphql\"}),\" file with the following code:\"]}),(0,e.jsxs)(s.dl,{children:[(0,e.jsx)(s.dt,{children:\"Positive\"}),(0,e.jsxs)(s.dd,{children:[\"For a complete list of available fields, refer to the \",(0,e.jsx)(s.a,{href:\"https://shopify.dev/api/functions/reference/product-discounts/graphql\",children:\"product discount input API\"})]})]}),(0,e.jsx)(s.pre,{children:(0,e.jsxs)(s.code,{className:\"hljs language-graphql\",children:[(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"query\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"Input\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"{\"}),`\n  cart `,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"{\"}),`\n    lines `,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"{\"}),`\n      quantity\n      merchandise `,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"{\"}),`\n        `,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"...\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"on\"}),\" ProductVariant \",(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"{\"}),`\n          id\n        `,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"}\"}),`\n      `,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"}\"}),`\n    `,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"}\"}),`\n  `,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"}\"}),`\n  discountNode `,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"{\"}),`\n    metafield`,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"(\"}),(0,e.jsx)(s.span,{className:\"hljs-symbol\",children:\"namespace\"}),(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\":\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"FUNCTION_APP\"'}),\", \",(0,e.jsx)(s.span,{className:\"hljs-symbol\",children:\"key\"}),(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\":\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"volume-config\"'}),(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\")\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"{\"}),`\n      value\n    `,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"}\"}),`\n  `,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"}\"}),`\n`,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"}\"}),`\n`]})}),(0,e.jsx)(s.h3,{children:(0,e.jsx)(s.code,{children:\"src/api.rs\"})}),(0,e.jsxs)(s.p,{children:[(0,e.jsx)(s.code,{children:\"src/api.rs\"}),\" is a helper library for Rust based functions that abstracts away certain Shopify APIs and concepts. A basic \",(0,e.jsx)(s.code,{children:\"api.rs\"}),\" is generated when the \",(0,e.jsx)(s.code,{children:\"generate extension\"}),\" command is run, but in this case we're adding a few other features.\"]}),(0,e.jsxs)(s.p,{children:[\"We want to update the configuration structure in \",(0,e.jsx)(s.code,{children:\"pub struct Configuration\"}),\" and the structs representing the input query.\"]}),(0,e.jsxs)(s.p,{children:[\"Replace the \",(0,e.jsx)(s.code,{children:\"src/api.rs\"}),\" file with the following code:\"]}),(0,e.jsx)(s.pre,{children:(0,e.jsxs)(s.code,{className:\"hljs language-rust\",children:[(0,e.jsx)(s.span,{className:\"hljs-meta\",children:\"#![allow(dead_code)]\"}),`\n\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"pub\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"type\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"Boolean\"}),\" = \",(0,e.jsx)(s.span,{className:\"hljs-type\",children:\"bool\"}),`;\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"pub\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"type\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"Float\"}),\" = \",(0,e.jsx)(s.span,{className:\"hljs-type\",children:\"f64\"}),`;\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"pub\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"type\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"Int\"}),\" = \",(0,e.jsx)(s.span,{className:\"hljs-type\",children:\"i64\"}),`;\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"pub\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"type\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"ID\"}),\" = \",(0,e.jsx)(s.span,{className:\"hljs-type\",children:\"String\"}),`;\n\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"pub\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"mod\"}),` input {\n    `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"use\"}),` super::*;\n    `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"use\"}),` serde::Deserialize;\n\n    `,(0,e.jsx)(s.span,{className:\"hljs-meta\",children:\"#[derive(Clone, Debug, Deserialize)]\"}),`\n    `,(0,e.jsxs)(s.span,{className:\"hljs-meta\",children:[\"#[serde(rename_all(deserialize = \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"camelCase\"'}),\"))]\"]}),`\n    `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"pub\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"struct\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"Input\"}),` {\n        `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"pub\"}),` discount_node: DiscountNode,\n        `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"pub\"}),` cart: Cart,\n    }\n\n    `,(0,e.jsx)(s.span,{className:\"hljs-meta\",children:\"#[derive(Clone, Debug, Deserialize, Default)]\"}),`\n    `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"pub\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"struct\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"DiscountNode\"}),` {\n        `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"pub\"}),\" metafield: \",(0,e.jsx)(s.span,{className:\"hljs-type\",children:\"Option\"}),`\u003cMetafield\u003e,\n    }\n\n    `,(0,e.jsx)(s.span,{className:\"hljs-meta\",children:\"#[derive(Clone, Debug, Deserialize, Default)]\"}),`\n    `,(0,e.jsxs)(s.span,{className:\"hljs-meta\",children:[\"#[serde(rename_all(deserialize = \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"camelCase\"'}),\"))]\"]}),`\n    `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"pub\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"struct\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"Metafield\"}),` {\n        `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"pub\"}),\" value: \",(0,e.jsx)(s.span,{className:\"hljs-type\",children:\"Option\"}),\"\u003c\",(0,e.jsx)(s.span,{className:\"hljs-type\",children:\"String\"}),`\u003e,\n    }\n\n    `,(0,e.jsx)(s.span,{className:\"hljs-meta\",children:\"#[derive(Clone, Debug, Serialize, Deserialize)]\"}),`\n    `,(0,e.jsxs)(s.span,{className:\"hljs-meta\",children:[\"#[serde(rename_all = \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"camelCase\"'}),\")]\"]}),`\n    `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"pub\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"struct\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"Configuration\"}),` {\n        `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"pub\"}),\" quantity: \",(0,e.jsx)(s.span,{className:\"hljs-type\",children:\"i64\"}),`,\n        `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"pub\"}),\" percentage: \",(0,e.jsx)(s.span,{className:\"hljs-type\",children:\"f64\"}),`,\n    }\n\n    `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"impl\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"Configuration\"}),` {\n        `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" DEFAULT_QUANTITY: \",(0,e.jsx)(s.span,{className:\"hljs-type\",children:\"i64\"}),\" = \",(0,e.jsx)(s.span,{className:\"hljs-number\",children:\"999\"}),`;\n        `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" DEFAULT_PERCENTAGE: \",(0,e.jsx)(s.span,{className:\"hljs-type\",children:\"f64\"}),\" = \",(0,e.jsx)(s.span,{className:\"hljs-number\",children:\"0.0\"}),`;\n\n        `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"fn\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"from_str\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-type\",children:\"str\"}),\": \u0026\",(0,e.jsx)(s.span,{className:\"hljs-type\",children:\"str\"}),\") \",(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"-\u003e\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"Self\"}),` {\n            serde_json::`,(0,e.jsx)(s.span,{className:\"hljs-title function_ invoke__\",children:\"from_str\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-type\",children:\"str\"}),\").\",(0,e.jsx)(s.span,{className:\"hljs-title function_ invoke__\",children:\"unwrap_or_default\"}),`()\n        }\n    }\n\n    `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"impl\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"Default\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"for\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"Configuration\"}),` {\n        `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"fn\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"default\"}),\"() \",(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"-\u003e\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"Self\"}),` {\n            Configuration {\n                quantity: `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"Self\"}),`::DEFAULT_QUANTITY,\n                percentage: `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"Self\"}),`::DEFAULT_PERCENTAGE,\n            }\n        }\n    }\n\n    `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"impl\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"input\"}),`::Input {\n        `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"pub\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"fn\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"configuration\"}),\"(\u0026\",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"self\"}),\") \",(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"-\u003e\"}),` Configuration {\n            `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"let\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\"}),(0,e.jsx)(s.span,{className:\"hljs-variable\",children:\"value\"}),\": \",(0,e.jsx)(s.span,{className:\"hljs-type\",children:\"Option\"}),\"\u003c\u0026\",(0,e.jsx)(s.span,{className:\"hljs-type\",children:\"str\"}),\"\u003e = \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"self\"}),`.discount_node.metafield\n                    .`,(0,e.jsx)(s.span,{className:\"hljs-title function_ invoke__\",children:\"as_ref\"}),\"().\",(0,e.jsx)(s.span,{className:\"hljs-title function_ invoke__\",children:\"and_then\"}),\"(|metafield| metafield.value.\",(0,e.jsx)(s.span,{className:\"hljs-title function_ invoke__\",children:\"as_deref\"}),`());\n            value.`,(0,e.jsx)(s.span,{className:\"hljs-title function_ invoke__\",children:\"map\"}),\"(Configuration::from_str).\",(0,e.jsx)(s.span,{className:\"hljs-title function_ invoke__\",children:\"unwrap_or_default\"}),`()\n        }\n    }\n\n    `,(0,e.jsx)(s.span,{className:\"hljs-meta\",children:\"#[derive(Clone, Debug, Deserialize)]\"}),`\n    `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"pub\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"struct\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"Cart\"}),` {\n        `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"pub\"}),\" lines: \",(0,e.jsx)(s.span,{className:\"hljs-type\",children:\"Vec\"}),`\u003cCartLine\u003e,\n    }\n\n    `,(0,e.jsx)(s.span,{className:\"hljs-meta\",children:\"#[derive(Clone, Debug, Deserialize)]\"}),`\n    `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"pub\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"struct\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"CartLine\"}),` {\n        `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"pub\"}),` quantity: Int,\n        `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"pub\"}),` merchandise: Merchandise,\n    }\n\n    `,(0,e.jsx)(s.span,{className:\"hljs-meta\",children:\"#[derive(Clone, Debug, Deserialize)]\"}),`\n    `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"pub\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"struct\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"Merchandise\"}),` {\n        `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"pub\"}),\" id: \",(0,e.jsx)(s.span,{className:\"hljs-type\",children:\"Option\"}),`\u003cID\u003e,\n    }\n}\n\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"use\"}),` serde::Serialize;\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"use\"}),` serde_with::skip_serializing_none;\n\n`,(0,e.jsx)(s.span,{className:\"hljs-meta\",children:\"#[derive(Clone, Debug, Serialize)]\"}),`\n`,(0,e.jsxs)(s.span,{className:\"hljs-meta\",children:[\"#[serde(rename_all(serialize = \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"camelCase\"'}),\"))]\"]}),`\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"pub\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"struct\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"FunctionResult\"}),` {\n    `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"pub\"}),` discount_application_strategy: DiscountApplicationStrategy,\n    `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"pub\"}),\" discounts: \",(0,e.jsx)(s.span,{className:\"hljs-type\",children:\"Vec\"}),`\u003cDiscount\u003e,\n}\n\n`,(0,e.jsx)(s.span,{className:\"hljs-meta\",children:\"#[derive(Clone, Debug, Serialize)]\"}),`\n`,(0,e.jsxs)(s.span,{className:\"hljs-meta\",children:[\"#[serde(rename_all(serialize = \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"SCREAMING_SNAKE_CASE\"'}),\"))]\"]}),`\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"pub\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"enum\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"DiscountApplicationStrategy\"}),` {\n    First,\n    Maximum,\n}\n\n`,(0,e.jsx)(s.span,{className:\"hljs-meta\",children:\"#[skip_serializing_none]\"}),`\n`,(0,e.jsx)(s.span,{className:\"hljs-meta\",children:\"#[derive(Clone, Debug, Serialize)]\"}),`\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"pub\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"struct\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"Discount\"}),` {\n    `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"pub\"}),` value: Value,\n    `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"pub\"}),\" targets: \",(0,e.jsx)(s.span,{className:\"hljs-type\",children:\"Vec\"}),`\u003cTarget\u003e,\n    `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"pub\"}),\" message: \",(0,e.jsx)(s.span,{className:\"hljs-type\",children:\"Option\"}),\"\u003c\",(0,e.jsx)(s.span,{className:\"hljs-type\",children:\"String\"}),`\u003e,\n    `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"pub\"}),\" conditions: \",(0,e.jsx)(s.span,{className:\"hljs-type\",children:\"Option\"}),\"\u003c\",(0,e.jsx)(s.span,{className:\"hljs-type\",children:\"Vec\"}),`\u003cCondition\u003e\u003e,\n}\n\n`,(0,e.jsx)(s.span,{className:\"hljs-meta\",children:\"#[derive(Clone, Debug, Serialize)]\"}),`\n`,(0,e.jsxs)(s.span,{className:\"hljs-meta\",children:[\"#[serde(rename_all(serialize = \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"camelCase\"'}),\"))]\"]}),`\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"pub\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"enum\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"Value\"}),` {\n    `,(0,e.jsx)(s.span,{className:\"hljs-title function_ invoke__\",children:\"FixedAmount\"}),`(FixedAmount),\n    `,(0,e.jsx)(s.span,{className:\"hljs-title function_ invoke__\",children:\"Percentage\"}),`(Percentage),\n}\n\n`,(0,e.jsx)(s.span,{className:\"hljs-meta\",children:\"#[derive(Clone, Debug, Serialize)]\"}),`\n`,(0,e.jsxs)(s.span,{className:\"hljs-meta\",children:[\"#[serde(rename_all(serialize = \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"camelCase\"'}),\"))]\"]}),`\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"pub\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"struct\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"FixedAmount\"}),` {\n    `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"pub\"}),\" applies_to_each_item: \",(0,e.jsx)(s.span,{className:\"hljs-type\",children:\"Option\"}),`\u003cBoolean\u003e,\n    `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"pub\"}),` value: Float,\n}\n\n`,(0,e.jsx)(s.span,{className:\"hljs-meta\",children:\"#[derive(Clone, Debug, Serialize)]\"}),`\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"pub\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"struct\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"Percentage\"}),` {\n    `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"pub\"}),` value: Float,\n}\n\n`,(0,e.jsx)(s.span,{className:\"hljs-meta\",children:\"#[skip_serializing_none]\"}),`\n`,(0,e.jsx)(s.span,{className:\"hljs-meta\",children:\"#[derive(Clone, Debug, Serialize)]\"}),`\n`,(0,e.jsxs)(s.span,{className:\"hljs-meta\",children:[\"#[serde(rename_all(serialize = \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"camelCase\"'}),\"))]\"]}),`\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"pub\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"enum\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"Target\"}),` {\n    ProductVariant { id: ID, quantity: `,(0,e.jsx)(s.span,{className:\"hljs-type\",children:\"Option\"}),`\u003cInt\u003e },\n}\n\n`,(0,e.jsx)(s.span,{className:\"hljs-meta\",children:\"#[derive(Clone, Debug, Serialize)]\"}),`\n`,(0,e.jsxs)(s.span,{className:\"hljs-meta\",children:[\"#[serde(rename_all(serialize = \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"camelCase\"'}),\"))]\"]}),`\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"pub\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"enum\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"Condition\"}),` {\n    `,(0,e.jsxs)(s.span,{className:\"hljs-meta\",children:[\"#[serde(rename_all(serialize = \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"camelCase\"'}),\"))]\"]}),`\n    ProductMinimumQuantity {\n        ids: `,(0,e.jsx)(s.span,{className:\"hljs-type\",children:\"Vec\"}),`\u003cID\u003e,\n        minimum_quantity: Int,\n        target_type: ConditionTargetType,\n    },\n    `,(0,e.jsxs)(s.span,{className:\"hljs-meta\",children:[\"#[serde(rename_all(serialize = \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"camelCase\"'}),\"))]\"]}),`\n    ProductMinimumSubtotal {\n        ids: `,(0,e.jsx)(s.span,{className:\"hljs-type\",children:\"Vec\"}),`\u003cID\u003e,\n        minimum_amount: Float,\n        target_type: ConditionTargetType,\n    },\n}\n\n`,(0,e.jsx)(s.span,{className:\"hljs-meta\",children:\"#[derive(Clone, Debug, Serialize)]\"}),`\n`,(0,e.jsxs)(s.span,{className:\"hljs-meta\",children:[\"#[serde(rename_all(serialize = \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"SCREAMING_SNAKE_CASE\"'}),\"))]\"]}),`\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"pub\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"enum\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"ConditionTargetType\"}),` {\n    ProductVariant,\n}\n\n`]})}),(0,e.jsx)(s.h3,{children:(0,e.jsx)(s.code,{children:\"src/main.rs\"})}),(0,e.jsxs)(s.p,{children:[(0,e.jsx)(s.code,{children:\"src/main.rs\"}),\" is the entry point for the function. It's written in Rust and uses \",(0,e.jsx)(s.code,{children:\"src/api.rs\"}),\". The end result of the function will be to build an \",(0,e.jsx)(s.a,{href:\"https://shopify.dev/api/functions/input-output#output\",children:\"output object\"}),\" which Shopify then uses to determine how much of a discount to apply to the cart at checkout.\"]}),(0,e.jsxs)(s.p,{children:[\"An example output object would look like the JSON below. In this example the discount is a fixed $50 off the 3 products in the cart with id \",(0,e.jsx)(s.code,{children:\"gid://shopify/ProductVariant/12345\"}),\",\"]}),(0,e.jsx)(s.pre,{children:(0,e.jsxs)(s.code,{className:\"hljs language-json\",children:[(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"{\"}),`\n  `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:'\"discounts\"'}),(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\":\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"[\"}),`\n    `,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"{\"}),`\n      `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:'\"message\"'}),(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\":\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"$50.00 off\"'}),(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\",\"}),`\n      `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:'\"targets\"'}),(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\":\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"[\"}),`\n        `,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"{\"}),`\n          `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:'\"productVariant\"'}),(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\":\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"{\"}),`\n            `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:'\"id\"'}),(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\":\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"gid://shopify/ProductVariant/12345\"'}),(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\",\"}),`\n            `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:'\"quantity\"'}),(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\":\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-number\",children:\"3\"}),`\n          `,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"}\"}),`\n        `,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"}\"}),`\n      `,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"]\"}),(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\",\"}),`\n      `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:'\"value\"'}),(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\":\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"{\"}),`\n        `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:'\"fixedAmount\"'}),(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\":\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"{\"}),`\n          `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:'\"value\"'}),(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\":\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-number\",children:\"50\"}),`\n        `,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"}\"}),`\n      `,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"}\"}),`\n    `,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"}\"}),`\n  `,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"]\"}),(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\",\"}),`\n  `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:'\"discountApplicationStrategy\"'}),(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\":\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"FIRST\"'}),`\n`,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"}\"}),`\n`]})}),(0,e.jsxs)(s.p,{children:[\"In the example below we keep track of the products to discount by adding them to a \",(0,e.jsx)(s.code,{children:\"targets\"}),\" array, only adding them if the amount of products being added is greater or equal to the amount set in the config file.\"]}),(0,e.jsx)(s.pre,{children:(0,e.jsxs)(s.code,{className:\"hljs language-rust\",children:[(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"let\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"mut \"}),(0,e.jsx)(s.span,{className:\"hljs-variable\",children:\"targets\"}),\" = \",(0,e.jsx)(s.span,{className:\"hljs-built_in\",children:\"vec!\"}),`[];\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"for\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-variable\",children:\"line\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"in\"}),` cart_lines {\n    `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"if\"}),` line.quantity \u003e= config.quantity {\n        targets.`,(0,e.jsx)(s.span,{className:\"hljs-title function_ invoke__\",children:\"push\"}),`(...);\n    }\n}\n`]})}),(0,e.jsx)(s.p,{children:\"After the product variant has been added to the array, then value of the product is discounted by the percentage set in the config file.\"}),(0,e.jsx)(s.pre,{children:(0,e.jsxs)(s.code,{className:\"hljs language-rust\",children:[\"discounts: \",(0,e.jsx)(s.span,{className:\"hljs-built_in\",children:\"vec!\"}),`[Discount {\n    ...\n    value: Value::`,(0,e.jsx)(s.span,{className:\"hljs-title function_ invoke__\",children:\"Percentage\"}),`(Percentage { value: config.percentage }),\n}],\n`]})}),(0,e.jsxs)(s.p,{children:[\"Replace the \",(0,e.jsx)(s.code,{children:\"src/main.rs\"}),\" file with the following code:\"]}),(0,e.jsx)(s.pre,{children:(0,e.jsxs)(s.code,{className:\"hljs language-rust\",children:[(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"use\"}),` serde::{Serialize};\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"mod\"}),` api;\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"use\"}),` api::*;\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"fn\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"main\"}),\"() \",(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"-\u003e\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-type\",children:\"Result\"}),\"\u003c(), \",(0,e.jsx)(s.span,{className:\"hljs-type\",children:\"Box\"}),\"\u003c\",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"dyn\"}),` std::error::Error\u003e\u003e {\n    `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"let\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\"}),(0,e.jsx)(s.span,{className:\"hljs-variable\",children:\"input\"}),\": input::Input = serde_json::\",(0,e.jsx)(s.span,{className:\"hljs-title function_ invoke__\",children:\"from_reader\"}),\"(std::io::BufReader::\",(0,e.jsx)(s.span,{className:\"hljs-title function_ invoke__\",children:\"new\"}),\"(std::io::\",(0,e.jsx)(s.span,{className:\"hljs-title function_ invoke__\",children:\"stdin\"}),`()))?;\n    `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"let\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"mut \"}),(0,e.jsx)(s.span,{className:\"hljs-variable\",children:\"out\"}),\" = std::io::\",(0,e.jsx)(s.span,{className:\"hljs-title function_ invoke__\",children:\"stdout\"}),`();\n    `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"let\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"mut \"}),(0,e.jsx)(s.span,{className:\"hljs-variable\",children:\"serializer\"}),\" = serde_json::Serializer::\",(0,e.jsx)(s.span,{className:\"hljs-title function_ invoke__\",children:\"new\"}),\"(\u0026\",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"mut\"}),` out);\n    `,(0,e.jsx)(s.span,{className:\"hljs-title function_ invoke__\",children:\"function\"}),\"(input)?.\",(0,e.jsx)(s.span,{className:\"hljs-title function_ invoke__\",children:\"serialize\"}),\"(\u0026\",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"mut\"}),` serializer)?;\n    `,(0,e.jsx)(s.span,{className:\"hljs-title function_ invoke__\",children:\"Ok\"}),`(())\n}\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"fn\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"function\"}),\"(input: input::Input) \",(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"-\u003e\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-type\",children:\"Result\"}),\"\u003cFunctionResult, \",(0,e.jsx)(s.span,{className:\"hljs-type\",children:\"Box\"}),\"\u003c\",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"dyn\"}),` std::error::Error\u003e\u003e {\n    `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"let\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\"}),(0,e.jsx)(s.span,{className:\"hljs-variable\",children:\"config\"}),\": input::Configuration = input.\",(0,e.jsx)(s.span,{className:\"hljs-title function_ invoke__\",children:\"configuration\"}),`();\n    `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"let\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\"}),(0,e.jsx)(s.span,{className:\"hljs-variable\",children:\"cart_lines\"}),` = input.cart.lines;\n\n    `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"if\"}),\" cart_lines.\",(0,e.jsx)(s.span,{className:\"hljs-title function_ invoke__\",children:\"is_empty\"}),\"() || config.percentage == \",(0,e.jsx)(s.span,{className:\"hljs-number\",children:\"0.0\"}),` {\n        `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"return\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title function_ invoke__\",children:\"Ok\"}),`(FunctionResult {\n            discounts: `,(0,e.jsx)(s.span,{className:\"hljs-built_in\",children:\"vec!\"}),`[],\n            discount_application_strategy: DiscountApplicationStrategy::First,\n        });\n    }\n\n    `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"let\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"mut \"}),(0,e.jsx)(s.span,{className:\"hljs-variable\",children:\"targets\"}),\" = \",(0,e.jsx)(s.span,{className:\"hljs-built_in\",children:\"vec!\"}),`[];\n    `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"for\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-variable\",children:\"line\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"in\"}),` cart_lines {\n        `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"if\"}),` line.quantity \u003e= config.quantity {\n            targets.`,(0,e.jsx)(s.span,{className:\"hljs-title function_ invoke__\",children:\"push\"}),`(Target::ProductVariant {\n                id: line.merchandise.id.`,(0,e.jsx)(s.span,{className:\"hljs-title function_ invoke__\",children:\"unwrap_or_default\"}),`(),\n                quantity: `,(0,e.jsx)(s.span,{className:\"hljs-literal\",children:\"None\"}),`,\n            });\n        }\n    }\n\n    `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"if\"}),\" targets.\",(0,e.jsx)(s.span,{className:\"hljs-title function_ invoke__\",children:\"is_empty\"}),`() {\n        `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"return\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title function_ invoke__\",children:\"Ok\"}),`(FunctionResult {\n            discounts: `,(0,e.jsx)(s.span,{className:\"hljs-built_in\",children:\"vec!\"}),`[],\n            discount_application_strategy: DiscountApplicationStrategy::First,\n        });\n    }\n\n    `,(0,e.jsx)(s.span,{className:\"hljs-title function_ invoke__\",children:\"Ok\"}),`(FunctionResult {\n        discounts: `,(0,e.jsx)(s.span,{className:\"hljs-built_in\",children:\"vec!\"}),`[Discount {\n            message: `,(0,e.jsx)(s.span,{className:\"hljs-literal\",children:\"None\"}),`,\n            conditions: `,(0,e.jsx)(s.span,{className:\"hljs-literal\",children:\"None\"}),`,\n            targets,\n            value: Value::`,(0,e.jsx)(s.span,{className:\"hljs-title function_ invoke__\",children:\"Percentage\"}),`(Percentage { value: config.percentage }),\n        }],\n        discount_application_strategy: DiscountApplicationStrategy::First,\n    })\n}\n`]})}),(0,e.jsxs)(s.p,{children:[\"Optionally tests can be added. Place these at the end of the \",(0,e.jsx)(s.code,{children:\"src/main.rs\"}),\" file. To run these tests navigate to the \",(0,e.jsx)(s.code,{children:\"extensions/volume\"}),\" directory and run the following command\"]}),(0,e.jsx)(s.pre,{children:(0,e.jsxs)(s.code,{className:\"hljs language-bash\",children:[\"cargo \",(0,e.jsx)(s.span,{className:\"hljs-built_in\",children:\"test\"}),`\n`]})}),(0,e.jsx)(s.pre,{children:(0,e.jsxs)(s.code,{className:\"hljs language-rust\",children:[(0,e.jsx)(s.span,{className:\"hljs-meta\",children:\"#[test]\"}),`\n    `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"fn\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"test_discount_with_configuration\"}),`() {\n        `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"let\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\"}),(0,e.jsx)(s.span,{className:\"hljs-variable\",children:\"input\"}),\" = \",(0,e.jsx)(s.span,{className:\"hljs-title function_ invoke__\",children:\"input\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-title function_ invoke__\",children:\"Some\"}),`(input::Configuration {\n            quantity: `,(0,e.jsx)(s.span,{className:\"hljs-number\",children:\"5\"}),`,\n            percentage: `,(0,e.jsx)(s.span,{className:\"hljs-number\",children:\"10.0\"}),`,\n        }));\n        `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"let\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\"}),(0,e.jsx)(s.span,{className:\"hljs-variable\",children:\"handle_result\"}),\" = serde_json::json!(\",(0,e.jsx)(s.span,{className:\"hljs-title function_ invoke__\",children:\"function\"}),\"(input).\",(0,e.jsx)(s.span,{className:\"hljs-title function_ invoke__\",children:\"unwrap\"}),`());\n\n        `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"let\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\"}),(0,e.jsx)(s.span,{className:\"hljs-variable\",children:\"expected_json\"}),\" = \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:`r#\"\n            {\n                \"discounts\": [{\n                    \"targets\": [\n                        { \"productVariant\": { \"id\": \"gid://shopify/ProductVariant/0\" } }\n                    ],\n                    \"value\": { \"percentage\": { \"value\": 10.0 } }\n                }],\n                \"discountApplicationStrategy\": \"FIRST\"\n            }\n        \"#`}),`;\n\n        `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"let\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\"}),(0,e.jsx)(s.span,{className:\"hljs-variable\",children:\"expected_handle_result\"}),`: serde_json::Value =\n            serde_json::`,(0,e.jsx)(s.span,{className:\"hljs-title function_ invoke__\",children:\"from_str\"}),\"(expected_json).\",(0,e.jsx)(s.span,{className:\"hljs-title function_ invoke__\",children:\"unwrap\"}),`();\n        `,(0,e.jsx)(s.span,{className:\"hljs-built_in\",children:\"assert_eq!\"}),`(\n            handle_result.`,(0,e.jsx)(s.span,{className:\"hljs-title function_ invoke__\",children:\"to_string\"}),`(),\n            expected_handle_result.`,(0,e.jsx)(s.span,{className:\"hljs-title function_ invoke__\",children:\"to_string\"}),`()\n        );\n    }\n`]})}),(0,e.jsx)(s.h3,{children:(0,e.jsx)(s.code,{children:\"shopify.function.extension.toml\"})}),(0,e.jsx)(s.p,{children:\"It's important to note that discounts created by apps and functions are viewable in the Shopify Admin along with out-of-the-box Shopify created discounts.\"}),(0,e.jsxs)(s.p,{children:[(0,e.jsx)(s.code,{children:\"shopify.function.extension.toml\"}),\" governs what paths in your app to open when a merchant attempts to create or update a discount.\"]}),(0,e.jsxs)(s.p,{children:[\"In \",(0,e.jsx)(s.code,{children:\"shopify.function.extension.toml\"}),\", edit the \",(0,e.jsx)(s.code,{children:\"ui.paths\"}),\" to match the configuration seen below.\"]}),(0,e.jsx)(s.pre,{children:(0,e.jsxs)(s.code,{className:\"hljs language-toml\",children:[(0,e.jsx)(s.span,{className:\"hljs-section\",children:\"[ui.paths]\"}),`\n`,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"create\"}),\" = \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"/volume/new\"'}),`\n`,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"details\"}),\" = \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"/volume/:id\"'}),`\n`]})}),(0,e.jsxs)(s.dl,{children:[(0,e.jsx)(s.dt,{children:\"Negative\"}),(0,e.jsxs)(s.dd,{children:[\"We won't be handling the update case \",(0,e.jsx)(s.code,{children:'details = \"/volume/:id\"'}),\" in this workshop.\"]})]}),(0,e.jsx)(s.h3,{children:\"Rebuild your WASM module\"}),(0,e.jsx)(s.p,{children:\"Now that we've updated the code, we need to rebuild our WASM module.\"}),(0,e.jsx)(s.pre,{children:(0,e.jsx)(s.code,{className:\"hljs language-bash\",children:`npm run build\n`})}),(0,e.jsx)(s.p,{children:\"You should see a message indicating that the function was built successfully.\"}),(0,e.jsx)(s.pre,{children:(0,e.jsx)(s.code,{className:\"hljs language-text\",children:`volume-test-1    | Building function volume-test-1...\nvolume-test-1    |     Finished release [optimized] target(s) in 0.04s\n`})})]})}),(0,e.jsx)(s.div,{className:\"workshop-step\",children:(0,e.jsxs)(s.section,{children:[(0,e.jsx)(s.h2,{id:\"5\",children:\"Deploy the function\"}),(0,e.jsx)(s.p,{children:\"We can now push our function and app to Shopify. Run this command from the top level directory.\"}),(0,e.jsx)(s.pre,{children:(0,e.jsx)(s.code,{className:\"hljs language-bash\",children:`npm run deploy\n`})}),(0,e.jsx)(s.p,{children:\"The output will look something like this:\"}),(0,e.jsx)(s.pre,{children:(0,e.jsxs)(s.code,{className:\"hljs language-bash\",children:[`$ npm run deploy\n\u003e functions-workshop@1.0.0 deploy\n\u003e shopify app deploy\n\nDeploying your work to Shopify Partners. It will be part of functions-workshop\n\n volume           | Building `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"function\"}),` volume...\n volume           |     Finished release [optimized] target(s) `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"in\"}),` 0.03s\n\n\nRunning validation\\u2026\n\nPushing your code to Shopify\\u2026\n\n\\u2705 Success! Deployed to Shopify.\n\n  Summary:\n    \\xB7 volume is live\n`]})}),(0,e.jsxs)(s.p,{children:[\"This will generate a \",(0,e.jsx)(s.code,{children:\".env\"}),\" file in the root of the project. This file contains the ID of the Function.\"]}),(0,e.jsx)(s.pre,{children:(0,e.jsxs)(s.code,{className:\"hljs language-ini\",children:[(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"SHOPIFY_API_KEY\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-number\",children:\"1234567890\"}),`abcdef1234567890abcdef\n`,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"SHOPIFY_VOLUME_ID\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-number\",children:\"01\"}),`GFN111111AAAAAAABTDED\n`]})})]})}),(0,e.jsx)(s.div,{className:\"workshop-step\",children:(0,e.jsxs)(s.section,{children:[(0,e.jsx)(s.h2,{id:\"6\",children:\"Add additional access scopes to your app\"}),(0,e.jsxs)(s.p,{children:[\"We'll now start creating the app part of this workshop. Your app must request the \",(0,e.jsx)(s.code,{children:\"write_discounts\"}),\" \",(0,e.jsx)(s.a,{href:\"https://shopify.dev/api/usage/access-scopes\",children:\"access scope\"}),\" to create discounts.\"]}),(0,e.jsxs)(s.p,{children:[\"Find the \",(0,e.jsx)(s.code,{children:\"shopify.app.toml\"}),\" file located at the top level directory of the project and add the \",(0,e.jsx)(s.code,{children:\"write_discounts\"}),\" access scope.\"]}),(0,e.jsx)(s.pre,{children:(0,e.jsxs)(s.code,{className:\"hljs language-toml\",children:[(0,e.jsx)(s.span,{className:\"hljs-comment\",children:\"# This file stores configurations for your Shopify app.\"}),`\n\n`,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"scopes\"}),\" = \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"write_products, write_discounts\"'}),`\n`]})})]})}),(0,e.jsx)(s.div,{className:\"workshop-step\",children:(0,e.jsxs)(s.section,{children:[(0,e.jsx)(s.h2,{id:\"7\",children:\"Configure your application frontend\"}),(0,e.jsx)(s.p,{children:\"In this step we'll be building out a frontend for our app. (See the very beginning on this workshop to see what it looks like!). The frontend will be a form that allows a merchant to create discounts based on the configuration we allow. In this case a minimum number of products that must be in their cart and a percentage discount that will be applied.\"}),(0,e.jsx)(s.h3,{children:\"Install additional libraries\"}),(0,e.jsxs)(s.p,{children:[\"The \",(0,e.jsx)(s.a,{href:\"https://shopify.dev/api/discounts\",children:\"discount React library\"}),\" provides a set of React components for building a discount form page. The discount React library helps you replicate the experience and behavior of existing discount types in your own app.\"]}),(0,e.jsxs)(s.p,{children:[\"Navigate to the \",(0,e.jsx)(s.code,{children:\"web/frontend\"}),\" directory.\"]}),(0,e.jsx)(s.pre,{children:(0,e.jsxs)(s.code,{className:\"hljs language-bash\",children:[(0,e.jsx)(s.span,{className:\"hljs-built_in\",children:\"cd\"}),` web/frontend\n`]})}),(0,e.jsx)(s.p,{children:\"Run the following command:\"}),(0,e.jsx)(s.pre,{children:(0,e.jsx)(s.code,{className:\"hljs language-bash\",children:`npm install @shopify/discount-app-components\n`})}),(0,e.jsx)(s.h3,{children:(0,e.jsx)(s.code,{children:\"App.jsx\"})}),(0,e.jsxs)(s.p,{children:[\"In \",(0,e.jsx)(s.code,{children:\"web/frontend/App.jsx\"}),\" we'll be importing and adding the \",(0,e.jsx)(s.code,{children:\"AppProvider\"}),\", from the \",(0,e.jsxs)(s.a,{href:\"https://www.npmjs.com/package/@shopify/discount-app-components\",children:[(0,e.jsx)(s.code,{children:\"discount-app-components\"}),\" library\"]}),\" (\",(0,e.jsx)(s.a,{href:\"https://github.com/Shopify/discount-app-components\",children:\"source code\"}),\") to the component tree. This library provides a set of stateless discount components to help app developers create discount apps. We'll also update the \",(0,e.jsx)(s.code,{children:\"navigationLinks\"}),\" to add a link to the create volume discount page.\"]}),(0,e.jsxs)(s.p,{children:[\"Your \",(0,e.jsx)(s.code,{children:\"App.jsx\"}),\" will look similar to the following example:\"]}),(0,e.jsx)(s.pre,{children:(0,e.jsxs)(s.code,{className:\"hljs language-javascript\",children:[(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" { \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"BrowserRouter\"}),\" } \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"react-router-dom\"'}),`;\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" { \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"NavigationMenu\"}),\" } \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"@shopify/app-bridge-react\"'}),`;\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"Routes\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"./Routes\"'}),`;\n\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" { \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"AppProvider\"}),\" } \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"@shopify/discount-app-components\"'}),`;\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"@shopify/discount-app-components/build/esm/styles.css\"'}),`;\n\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),` {\n  `,(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"AppBridgeProvider\"}),`,\n  `,(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"QueryProvider\"}),`,\n  `,(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"PolarisProvider\"}),`,\n} `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"./components\"'}),`;\n\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"export\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"default\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"function\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"App\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-params\"}),`) {\n  `,(0,e.jsx)(s.span,{className:\"hljs-comment\",children:\"// Any .tsx or .jsx files in /pages will become a route\"}),`\n  `,(0,e.jsx)(s.span,{className:\"hljs-comment\",children:\"// For more information, refer to the \u003cRoutes /\u003e documentation\"}),`\n  `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" pages = \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\".\",(0,e.jsx)(s.span,{className:\"hljs-property\",children:\"meta\"}),\".\",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"globEager\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"./pages/**/!(*.test.[jt]sx)*.([jt]sx)\"'}),`);\n\n  `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"return\"}),` (\n    `,(0,e.jsxs)(s.span,{className:\"xml\",children:[(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"\u003c\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"PolarisProvider\"}),\"\u003e\"]}),`\n      `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"\u003c\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"BrowserRouter\"}),\"\u003e\"]}),`\n        `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"\u003c\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"AppBridgeProvider\"}),\"\u003e\"]}),`\n          `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"\u003c\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"AppProvider\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"locale\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"en-US\"'}),\" \",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"ianaTimezone\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"America/Toronto\"'}),\"\u003e\"]}),`\n            `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"\u003c\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"QueryProvider\"}),\"\u003e\"]}),`\n              `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"\u003c\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"NavigationMenu\"}),`\n                `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"navigationLinks\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"{[\"}),`\n                  {\n                    `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"label:\"}),' \"',(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"New\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"volume\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"discount\"}),`\",\n                    `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"destination:\"}),' \"/',(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"Volume\"}),\"/\",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"new\"}),`\",\n                  },\n                ]}\n              /\u003e`]}),`\n              `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"\u003c\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"Routes\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"pages\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"{pages}\"}),\" /\u003e\"]}),`\n            `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"\u003c/\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"QueryProvider\"}),\"\u003e\"]}),`\n          `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"\u003c/\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"AppProvider\"}),\"\u003e\"]}),`\n        `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"\u003c/\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"AppBridgeProvider\"}),\"\u003e\"]}),`\n      `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"\u003c/\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"BrowserRouter\"}),\"\u003e\"]}),`\n    `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"\u003c/\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"PolarisProvider\"}),\"\u003e\"]})]}),`\n  );\n}\n`]})}),(0,e.jsx)(s.h3,{children:(0,e.jsx)(s.code,{children:\"web/frontend/pages/Volume/new.jsx\"})}),(0,e.jsxs)(s.p,{children:[\"Install \",(0,e.jsx)(s.code,{children:\"@shopify/react-form\"}),\" to make managing your forms easier and \",(0,e.jsx)(s.code,{children:\"@shopify/react-i18n\"}),\" for localization support.\"]}),(0,e.jsx)(s.pre,{children:(0,e.jsx)(s.code,{className:\"hljs language-bash\",children:`npm install @shopify/react-form @shopify/react-i18n\n`})}),(0,e.jsxs)(s.p,{children:[\"Create a new \",(0,e.jsx)(s.code,{children:\"Volume\"}),\" directory under \",(0,e.jsx)(s.code,{children:\"web/frontend/pages\"}),\" and create a \",(0,e.jsx)(s.code,{children:\"new.jsx\"}),\" file. Copy the code below into the file.\"]}),(0,e.jsxs)(s.dl,{children:[(0,e.jsx)(s.dt,{children:\"Positive\"}),(0,e.jsxs)(s.dd,{children:[(0,e.jsx)(s.strong,{children:\"IMPORTANT:\"}),\" Replace \",(0,e.jsx)(s.code,{children:\"FUNCTION_ID\"}),\" with the ID of the function. The ID can be found in the \",(0,e.jsx)(s.code,{children:\".env\"}),\" file that was generated from the \",(0,e.jsx)(s.code,{children:\"npm run deploy\"}),\" command.\"]})]}),(0,e.jsx)(s.pre,{children:(0,e.jsxs)(s.code,{className:\"hljs language-javascript\",children:[(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" { useForm, useField } \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"@shopify/react-form\"'}),`;\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" { \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"CurrencyCode\"}),\" } \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"@shopify/react-i18n\"'}),`;\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" { \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"Redirect\"}),\" } \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"@shopify/app-bridge/actions\"'}),`;\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" { useAppBridge } \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"@shopify/app-bridge-react\"'}),`;\n\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),` {\n  `,(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"ActiveDatesCard\"}),`,\n  `,(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"CombinationCard\"}),`,\n  `,(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"DiscountClass\"}),`,\n  `,(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"DiscountMethod\"}),`,\n  `,(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"MethodCard\"}),`,\n  `,(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"DiscountStatus\"}),`,\n  `,(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"RequirementType\"}),`,\n  `,(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"SummaryCard\"}),`,\n  `,(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"UsageLimitsCard\"}),`,\n  onBreadcrumbAction,\n} `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"@shopify/discount-app-components\"'}),`;\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),` {\n  `,(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"Banner\"}),`,\n  `,(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"Card\"}),`,\n  `,(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"Layout\"}),`,\n  `,(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"Page\"}),`,\n  `,(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"TextField\"}),`,\n  `,(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"Stack\"}),`,\n  `,(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"PageActions\"}),`,\n} `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"@shopify/polaris\"'}),`;\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" { data } \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"@shopify/app-bridge/actions/Modal\"'}),`;\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" { useAuthenticatedFetch } \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"../../hooks\"'}),`;\n\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" todaysDate = \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"new\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"Date\"}),`();\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-variable constant_\",children:\"METAFIELD_NAMESPACE\"}),\" = \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"FUNCTION_APP\"'}),`;\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-variable constant_\",children:\"METAFIELD_CONFIGURATION_KEY\"}),\" = \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"volume-config\"'}),`;\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-variable constant_\",children:\"FUNCTION_ID\"}),\" = \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"YOUR_FUNCTION_ID\"'}),`;\n\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"export\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"default\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"function\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"VolumeNew\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-params\"}),`) {\n  `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" app = \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"useAppBridge\"}),`();\n  `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" redirect = \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"Redirect\"}),\".\",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"create\"}),`(app);\n  `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" currencyCode = \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"CurrencyCode\"}),\".\",(0,e.jsx)(s.span,{className:\"hljs-property\",children:\"Cad\"}),`;\n  `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" authenticatedFetch = \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"useAuthenticatedFetch\"}),`();\n\n  `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),` {\n    `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"fields\"}),`: {\n      discountTitle,\n      discountCode,\n      discountMethod,\n      combinesWith,\n      requirementType,\n      requirementSubtotal,\n      requirementQuantity,\n      usageTotalLimit,\n      usageOncePerCustomer,\n      startDate,\n      endDate,\n      configuration,\n    },\n    submit,\n    submitting,\n    dirty,\n    reset,\n    submitErrors,\n    makeClean,\n  } = `,(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"useForm\"}),`({\n    `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"fields\"}),`: {\n      `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"discountTitle\"}),\": \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"useField\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"\"'}),`),\n      `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"discountMethod\"}),\": \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"useField\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"DiscountMethod\"}),\".\",(0,e.jsx)(s.span,{className:\"hljs-property\",children:\"Code\"}),`),\n      `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"discountCode\"}),\": \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"useField\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"\"'}),`),\n      `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"combinesWith\"}),\": \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"useField\"}),`({\n        `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"orderDiscounts\"}),\": \",(0,e.jsx)(s.span,{className:\"hljs-literal\",children:\"false\"}),`,\n        `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"productDiscounts\"}),\": \",(0,e.jsx)(s.span,{className:\"hljs-literal\",children:\"false\"}),`,\n        `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"shippingDiscounts\"}),\": \",(0,e.jsx)(s.span,{className:\"hljs-literal\",children:\"false\"}),`,\n      }),\n      `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"requirementType\"}),\": \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"useField\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"RequirementType\"}),\".\",(0,e.jsx)(s.span,{className:\"hljs-property\",children:\"None\"}),`),\n      `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"requirementSubtotal\"}),\": \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"useField\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"0\"'}),`),\n      `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"requirementQuantity\"}),\": \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"useField\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"0\"'}),`),\n      `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"usageTotalLimit\"}),\": \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"useField\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-literal\",children:\"null\"}),`),\n      `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"usageOncePerCustomer\"}),\": \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"useField\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-literal\",children:\"false\"}),`),\n      `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"startDate\"}),\": \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"useField\"}),`(todaysDate),\n      `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"endDate\"}),\": \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"useField\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-literal\",children:\"null\"}),`),\n      `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"configuration\"}),`: {\n        `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"quantity\"}),\": \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"useField\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"1\"'}),`),\n        `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"percentage\"}),\": \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"useField\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"0\"'}),`),\n      },\n    },\n    `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"onSubmit\"}),\": \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"async\"}),` (form) =\u003e {\n      `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),` discount = {\n        `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"functionId\"}),\": \",(0,e.jsx)(s.span,{className:\"hljs-variable constant_\",children:\"FUNCTION_ID\"}),`,\n        `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"combinesWith\"}),\": form.\",(0,e.jsx)(s.span,{className:\"hljs-property\",children:\"combinesWith\"}),`,\n        `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"startsAt\"}),\": form.\",(0,e.jsx)(s.span,{className:\"hljs-property\",children:\"startDate\"}),`,\n        `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"endsAt\"}),\": form.\",(0,e.jsx)(s.span,{className:\"hljs-property\",children:\"endDate\"}),`,\n        `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"metafields\"}),`: [\n          {\n            `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"namespace\"}),\": \",(0,e.jsx)(s.span,{className:\"hljs-variable constant_\",children:\"METAFIELD_NAMESPACE\"}),`,\n            `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"key\"}),\": \",(0,e.jsx)(s.span,{className:\"hljs-variable constant_\",children:\"METAFIELD_CONFIGURATION_KEY\"}),`,\n            `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"type\"}),\": \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"json\"'}),`,\n            `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"value\"}),\": \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"JSON\"}),\".\",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"stringify\"}),`({\n              `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"quantity\"}),\": \",(0,e.jsx)(s.span,{className:\"hljs-built_in\",children:\"parseInt\"}),\"(form.\",(0,e.jsx)(s.span,{className:\"hljs-property\",children:\"configuration\"}),\".\",(0,e.jsx)(s.span,{className:\"hljs-property\",children:\"quantity\"}),`),\n              `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"percentage\"}),\": \",(0,e.jsx)(s.span,{className:\"hljs-built_in\",children:\"parseFloat\"}),\"(form.\",(0,e.jsx)(s.span,{className:\"hljs-property\",children:\"configuration\"}),\".\",(0,e.jsx)(s.span,{className:\"hljs-property\",children:\"percentage\"}),`),\n            }),\n          },\n        ],\n      };\n\n      `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"let\"}),` response;\n      `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"if\"}),\" (form.\",(0,e.jsx)(s.span,{className:\"hljs-property\",children:\"discountMethod\"}),\" === \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"DiscountMethod\"}),\".\",(0,e.jsx)(s.span,{className:\"hljs-property\",children:\"Automatic\"}),`) {\n        response = `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"await\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"authenticatedFetch\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"/api/discounts/automatic\"'}),`, {\n          `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"method\"}),\": \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"POST\"'}),`,\n          `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"headers\"}),\": { \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"Content-Type\"'}),\": \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"application/json\"'}),` },\n          `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"body\"}),\": \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"JSON\"}),\".\",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"stringify\"}),`({\n            `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"discount\"}),`: {\n              ...discount,\n              `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"title\"}),\": form.\",(0,e.jsx)(s.span,{className:\"hljs-property\",children:\"discountTitle\"}),`,\n            },\n          }),\n        });\n      } `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"else\"}),` {\n        response = `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"await\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"authenticatedFetch\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"/api/discounts/code\"'}),`, {\n          `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"method\"}),\": \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"POST\"'}),`,\n          `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"headers\"}),\": { \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"Content-Type\"'}),\": \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"application/json\"'}),` },\n          `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"body\"}),\": \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"JSON\"}),\".\",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"stringify\"}),`({\n            `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"discount\"}),`: {\n              ...discount,\n              `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"title\"}),\": form.\",(0,e.jsx)(s.span,{className:\"hljs-property\",children:\"discountCode\"}),`,\n              `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"code\"}),\": form.\",(0,e.jsx)(s.span,{className:\"hljs-property\",children:\"discountCode\"}),`,\n            },\n          }),\n        });\n      }\n\n      `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" data = (\",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"await\"}),\" response.\",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"json\"}),\"()).\",(0,e.jsx)(s.span,{className:\"hljs-property\",children:\"data\"}),`;\n      `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" remoteErrors = data.\",(0,e.jsx)(s.span,{className:\"hljs-property\",children:\"discountCreate\"}),\".\",(0,e.jsx)(s.span,{className:\"hljs-property\",children:\"userErrors\"}),`;\n      `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"if\"}),\" (remoteErrors.\",(0,e.jsx)(s.span,{className:\"hljs-property\",children:\"length\"}),\" \u003e \",(0,e.jsx)(s.span,{className:\"hljs-number\",children:\"0\"}),`) {\n        `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"return\"}),\" { \",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"status\"}),\": \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"fail\"'}),\", \",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"errors\"}),`: remoteErrors };\n      }\n\n      redirect.`,(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"dispatch\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"Redirect\"}),\".\",(0,e.jsx)(s.span,{className:\"hljs-property\",children:\"Action\"}),\".\",(0,e.jsx)(s.span,{className:\"hljs-property\",children:\"ADMIN_SECTION\"}),`, {\n        `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"name\"}),\": \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"Redirect\"}),\".\",(0,e.jsx)(s.span,{className:\"hljs-property\",children:\"ResourceType\"}),\".\",(0,e.jsx)(s.span,{className:\"hljs-property\",children:\"Discount\"}),`,\n      });\n      `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"return\"}),\" { \",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"status\"}),\": \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"success\"'}),` };\n    },\n  });\n\n  `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),` errorBanner =\n    submitErrors.`,(0,e.jsx)(s.span,{className:\"hljs-property\",children:\"length\"}),\" \u003e \",(0,e.jsx)(s.span,{className:\"hljs-number\",children:\"0\"}),` ? (\n      `,(0,e.jsxs)(s.span,{className:\"xml\",children:[(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"\u003c\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"Layout.Section\"}),\"\u003e\"]}),`\n        `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"\u003c\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"Banner\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"status\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"critical\"'}),\"\u003e\"]}),`\n          `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"\u003c\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"p\"}),\"\u003e\"]}),\"There were some issues with your form submission:\",(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"\u003c/\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"p\"}),\"\u003e\"]}),`\n          `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"\u003c\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"ul\"}),\"\u003e\"]}),`\n            {submitErrors.map(({ message, field }, index) =\u003e {\n              return (\n                `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"\u003c\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"li\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"key\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"{\"}),\"`${\",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"message\"}),\"}${\",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"index\"}),\"}`}\u003e\"]}),`\n                  {field.join(\".\")} {message}\n                `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"\u003c/\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"li\"}),\"\u003e\"]}),`\n              );\n            })}\n          `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"\u003c/\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"ul\"}),\"\u003e\"]}),`\n        `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"\u003c/\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"Banner\"}),\"\u003e\"]}),`\n      `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"\u003c/\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"Layout.Section\"}),\"\u003e\"]})]}),`\n    ) : `,(0,e.jsx)(s.span,{className:\"hljs-literal\",children:\"null\"}),`;\n\n  `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"return\"}),` (\n    `,(0,e.jsxs)(s.span,{className:\"xml\",children:[(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"\u003c\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"Page\"}),`\n      `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"title\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"Create volume discount\"'}),`\n      `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"breadcrumbs\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"{[\"}),`\n        {\n          `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"content:\"}),' \"',(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"Discounts\"}),`\",\n          `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"onAction:\"}),\" () =\u003e\"]}),` onBreadcrumbAction(redirect, true),\n        },\n      ]}\n      primaryAction={{\n        content: \"Save\",\n        onAction: submit,\n        disabled: !dirty,\n        loading: submitting,\n      }}\n    \u003e\n      `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"\u003c\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"Layout\"}),\"\u003e\"]}),`\n        {errorBanner}\n        `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"\u003c\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"Layout.Section\"}),\"\u003e\"]}),`\n          `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"\u003c\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"form\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"onSubmit\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"{submit}\"}),\"\u003e\"]}),`\n            `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"\u003c\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"MethodCard\"}),`\n              `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"title\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"Volume\"'}),`\n              `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"discountTitle\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"{discountTitle}\"}),`\n              `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"discountClass\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"{DiscountClass.Product}\"}),`\n              `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"discountCode\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"{discountCode}\"}),`\n              `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"discountMethod\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"{discountMethod}\"}),`\n            /\u003e`]}),`\n            `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"\u003c\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"Card\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"title\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"Volume\"'}),\"\u003e\"]}),`\n              `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"\u003c\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"Card.Section\"}),\"\u003e\"]}),`\n                `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"\u003c\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"Stack\"}),\"\u003e\"]}),`\n                  `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"\u003c\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"TextField\"}),`\n                    `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"label\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"Minimum quantity\"'}),`\n                    {`,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"...configuration.quantity\"}),`}\n                  /\u003e`]}),`\n                  `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"\u003c\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"TextField\"}),`\n                    `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"label\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"Discount percentage\"'}),`\n                    {`,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"...configuration.percentage\"}),`}\n                    `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"suffix\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"%\"'}),`\n                  /\u003e`]}),`\n                `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"\u003c/\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"Stack\"}),\"\u003e\"]}),`\n              `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"\u003c/\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"Card.Section\"}),\"\u003e\"]}),`\n            `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"\u003c/\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"Card\"}),\"\u003e\"]}),`\n            {discountMethod.value === DiscountMethod.Code \u0026\u0026 (\n              `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"\u003c\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"UsageLimitsCard\"}),`\n                `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"totalUsageLimit\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"{usageTotalLimit}\"}),`\n                `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"oncePerCustomer\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"{usageOncePerCustomer}\"}),`\n              /\u003e`]}),`\n            )}\n            `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"\u003c\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"CombinationCard\"}),`\n              `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"combinableDiscountTypes\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"{combinesWith}\"}),`\n              `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"discountClass\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"{DiscountClass.Product}\"}),`\n              `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"discountDescriptor\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"{\"}),`\n                `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"discountMethod.value\"}),\" === \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"DiscountMethod.Automatic\"}),`\n                  ? `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"discountTitle.value\"}),`\n                  `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\":\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"discountCode.value\"}),`\n              }\n            /\u003e`]}),`\n            `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"\u003c\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"ActiveDatesCard\"}),`\n              `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"startDate\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"{startDate}\"}),`\n              `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"endDate\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"{endDate}\"}),`\n              `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"timezoneAbbreviation\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"EST\"'}),`\n            /\u003e`]}),`\n          `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"\u003c/\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"form\"}),\"\u003e\"]}),`\n        `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"\u003c/\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"Layout.Section\"}),\"\u003e\"]}),`\n        `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"\u003c\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"Layout.Section\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"secondary\"}),\"\u003e\"]}),`\n          `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"\u003c\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"SummaryCard\"}),`\n            `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"header\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"{{\"}),`\n              `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"discountMethod:\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"discountMethod.value\"}),`,\n              `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"discountDescriptor:\"}),`\n                `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"discountMethod.value\"}),\" === \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"DiscountMethod.Automatic\"}),`\n                  ? `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"discountTitle.value\"}),`\n                  `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\":\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"discountCode.value\"}),`,\n              `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"appDiscountType:\"}),' \"',(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"Volume\"}),`\",\n              `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"isEditing:\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"false\"}),`,\n            }}\n            `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"performance\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"{{\"}),`\n              `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"status:\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"DiscountStatus.Scheduled\"}),`,\n              `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"usageCount:\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"0\"}),`,\n            }}\n            `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"minimumRequirements\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"{{\"}),`\n              `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"requirementType:\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"requirementType.value\"}),`,\n              `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"subtotal:\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"requirementSubtotal.value\"}),`,\n              `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"quantity:\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"requirementQuantity.value\"}),`,\n              `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"currencyCode:\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"currencyCode\"}),`,\n            }}\n            `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"usageLimits\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"{{\"}),`\n              `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"oncePerCustomer:\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"usageOncePerCustomer.value\"}),`,\n              `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"totalUsageLimit:\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"usageTotalLimit.value\"}),`,\n            }}\n            `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"activeDates\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"{{\"}),`\n              `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"startDate:\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"startDate.value\"}),`,\n              `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"endDate:\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"endDate.value\"}),`,\n            }}\n          /\u003e`]}),`\n        `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"\u003c/\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"Layout.Section\"}),\"\u003e\"]}),`\n        `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"\u003c\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"Layout.Section\"}),\"\u003e\"]}),`\n          `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"\u003c\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"PageActions\"}),`\n            `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"primaryAction\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"{{\"}),`\n              `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"content:\"}),' \"',(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"Save\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"discount\"}),`\",\n              `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"onAction:\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"submit\"}),`,\n              `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"disabled:\"}),\" !\",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"dirty\"}),`,\n              `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"loading:\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"submitting\"}),`,\n            }}\n            `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"secondaryActions\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"{[\"}),`\n              {\n                `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"content:\"}),' \"',(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"Discard\"}),`\",\n                `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"onAction:\"}),\" () =\u003e\"]}),` onBreadcrumbAction(redirect, true),\n              },\n            ]}\n          /\u003e\n        `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"\u003c/\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"Layout.Section\"}),\"\u003e\"]}),`\n      `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"\u003c/\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"Layout\"}),\"\u003e\"]}),`\n    `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"\u003c/\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"Page\"}),\"\u003e\"]})]}),`\n  );\n}\n`]})})]})}),(0,e.jsx)(s.div,{className:\"workshop-step\",children:(0,e.jsxs)(s.section,{children:[(0,e.jsx)(s.h2,{id:\"8\",children:\"Configure your application backend\"}),(0,e.jsxs)(s.p,{children:[\"In \",(0,e.jsx)(s.code,{children:\"web/index.js\"}),\", define the mutations you'll need to create discounts before the \",(0,e.jsx)(s.code,{children:\"const app = express()\"}),\" line.\"]}),(0,e.jsx)(s.pre,{children:(0,e.jsxs)(s.code,{className:\"hljs language-javascript\",children:[(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-variable constant_\",children:\"CREATE_CODE_MUTATION\"}),\" = \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:`\\`\n  mutation CreateCodeDiscount($discount: DiscountCodeAppInput!) {\n    discountCreate: discountCodeAppCreate(codeAppDiscount: $discount) {\n      userErrors {\n        code\n        message\n        field\n      }\n    }\n  }\n\\``}),`;\n\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-variable constant_\",children:\"CREATE_AUTOMATIC_MUTATION\"}),\" = \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:`\\`\n  mutation CreateAutomaticDiscount($discount: DiscountAutomaticAppInput!) {\n    discountCreate: discountAutomaticAppCreate(\n      automaticAppDiscount: $discount\n    ) {\n      userErrors {\n        code\n        message\n        field\n      }\n    }\n  }\n\\``}),`;\n`]})}),(0,e.jsxs)(s.p,{children:[\"Still in \",(0,e.jsx)(s.code,{children:\"web/index.js\"}),\", add the endpoints to create discounts directly after \",(0,e.jsx)(s.code,{children:\"app.use(express.json())\"}),\":\"]}),(0,e.jsx)(s.pre,{children:(0,e.jsxs)(s.code,{className:\"hljs language-javascript\",children:[(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"runDiscountMutation\"}),\" = \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"async\"}),\" (\",(0,e.jsx)(s.span,{className:\"hljs-params\",children:\"req, res, mutation\"}),`) =\u003e {\n  `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" client = \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"new\"}),\" shopify.\",(0,e.jsx)(s.span,{className:\"hljs-property\",children:\"api\"}),\".\",(0,e.jsx)(s.span,{className:\"hljs-property\",children:\"clients\"}),\".\",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"Graphql\"}),`({\n    `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"session\"}),\": res.\",(0,e.jsx)(s.span,{className:\"hljs-property\",children:\"locals\"}),\".\",(0,e.jsx)(s.span,{className:\"hljs-property\",children:\"shopify\"}),\".\",(0,e.jsx)(s.span,{className:\"hljs-property\",children:\"session\"}),`,\n  });\n\n  `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" data = \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"await\"}),\" client.\",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"query\"}),`({\n    `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"data\"}),`: {\n      `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"query\"}),`: mutation,\n      `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"variables\"}),\": req.\",(0,e.jsx)(s.span,{className:\"hljs-property\",children:\"body\"}),`,\n    },\n  });\n\n  res.`,(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"send\"}),\"(data.\",(0,e.jsx)(s.span,{className:\"hljs-property\",children:\"body\"}),`);\n};\n\napp.`,(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"post\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"/api/discounts/code\"'}),\", \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"async\"}),` (req, res) =\u003e {\n  `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"await\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"runDiscountMutation\"}),\"(req, res, \",(0,e.jsx)(s.span,{className:\"hljs-variable constant_\",children:\"CREATE_CODE_MUTATION\"}),`);\n});\n\napp.`,(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"post\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"/api/discounts/automatic\"'}),\", \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"async\"}),` (req, res) =\u003e {\n  `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"await\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"runDiscountMutation\"}),\"(req, res, \",(0,e.jsx)(s.span,{className:\"hljs-variable constant_\",children:\"CREATE_AUTOMATIC_MUTATION\"}),`);\n});\n`]})})]})}),(0,e.jsx)(s.div,{className:\"workshop-step\",children:(0,e.jsxs)(s.section,{children:[(0,e.jsx)(s.h2,{id:\"9\",children:\"Run the application locally\"}),(0,e.jsxs)(s.p,{children:[\"We can now run \",(0,e.jsx)(s.code,{children:\"npm run dev\"}),\" to start the app server locally, this will allow you to install the app to your Shopify store.\"]}),(0,e.jsx)(s.pre,{children:(0,e.jsx)(s.code,{className:\"hljs language-bash\",children:`npm run dev\n`})}),(0,e.jsx)(s.p,{children:\"After the app is up and running, click on the link to install the app on your store.\"})]})}),(0,e.jsx)(s.div,{className:\"workshop-step\",children:(0,e.jsxs)(s.section,{children:[(0,e.jsx)(s.h2,{id:\"10\",children:\"Create a discount with the admin menu\"}),(0,e.jsxs)(s.p,{children:[\"From the app menu, choose the newly created app and then select the \",(0,e.jsx)(s.strong,{children:\"New volume discount\"}),\" option. With the we created earlier available to us, we can now create a discount. Choose to create either a discount code or an automatic discount. And, at minimum, choose the discount percentage and minimum quantity. Click \",(0,e.jsx)(s.strong,{children:\"Save\"}),\" to create the discount.\"]}),(0,e.jsx)(s.p,{children:(0,e.jsx)(s.img,{src:\"/content/images/optimized/functions-volume-discount/create-discount.jpg\",alt:\"An image showing how a discount is created.\"})}),(0,e.jsxs)(s.p,{children:[\"The discount will be visible from the \",(0,e.jsx)(s.strong,{children:\"Discounts\"}),\" menu in the admin.\"]}),(0,e.jsx)(s.p,{children:(0,e.jsx)(s.img,{src:\"/content/images/optimized/functions-volume-discount/list-discounts.jpg\",alt:\"An image showing a function based discount in the admin panel.\"})})]})}),(0,e.jsx)(s.div,{className:\"workshop-step\",children:(0,e.jsxs)(s.section,{children:[(0,e.jsx)(s.h2,{id:\"11\",children:\"Test the discount\"}),(0,e.jsx)(s.p,{children:\"From your online store, create an order and go through the checkout steps to confirm your script is working as expected. The discounts in the cart and at checkout should display a message with the name of the discount that was created.\"}),(0,e.jsx)(s.p,{children:(0,e.jsx)(s.img,{src:\"/content/images/optimized/functions-volume-discount/checkout.jpg\",alt:\"An image showing the checkout with the discount working appropriately.\"})})]})}),(0,e.jsx)(s.div,{className:\"workshop-step\",children:(0,e.jsxs)(s.section,{children:[(0,e.jsx)(s.h2,{id:\"12\",children:\"(Optional) Use GraphiQL call the discount APIs\"}),(0,e.jsxs)(s.p,{children:[\"Install the Shopify \",(0,e.jsx)(s.a,{href:\"https://shopify-graphiql-app.shopifycloud.com/login\",children:\"GraphiQL\"}),\" app. Ensure the \",(0,e.jsx)(s.code,{children:\"read_discounts\"}),\" and \",(0,e.jsx)(s.code,{children:\"write_discounts\"}),\" are selected. Try to run the following queries and mutations:\"]}),(0,e.jsx)(s.h3,{children:\"List discounts\"}),(0,e.jsx)(s.pre,{children:(0,e.jsxs)(s.code,{className:\"hljs language-graphql\",children:[(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"query\"}),\" ListDiscounts \",(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"{\"}),`\n  discountNodes`,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"(\"}),(0,e.jsx)(s.span,{className:\"hljs-symbol\",children:\"first\"}),(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\":\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-number\",children:\"10\"}),(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\")\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"{\"}),`\n    edges `,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"{\"}),`\n      node `,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"{\"}),`\n        id\n        discount `,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"{\"}),`\n          `,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"...\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"on\"}),\" DiscountAutomaticApp \",(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"{\"}),`\n            title\n            appDiscountType `,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"{\"}),`\n              functionId\n              title\n            `,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"}\"}),`\n          `,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"}\"}),`\n        `,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"}\"}),`\n        `,(0,e.jsx)(s.span,{className:\"hljs-comment\",children:\"# Remove this section if you don't want to see the configuration\"}),`\n        `,(0,e.jsx)(s.span,{className:\"hljs-symbol\",children:\"configuration\"}),(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\":\"}),\" metafield\",(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"(\"}),`\n          `,(0,e.jsx)(s.span,{className:\"hljs-symbol\",children:\"namespace\"}),(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\":\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"FUNCTION_APP\"'}),`\n          `,(0,e.jsx)(s.span,{className:\"hljs-symbol\",children:\"key\"}),(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\":\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"volume-config\"'}),`\n        `,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\")\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"{\"}),`\n          id\n          value\n        `,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"}\"}),`\n      `,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"}\"}),`\n    `,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"}\"}),`\n  `,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"}\"}),`\n`,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"}\"}),`\n`]})}),(0,e.jsx)(s.h3,{children:\"Delete a discount\"}),(0,e.jsx)(s.pre,{children:(0,e.jsxs)(s.code,{className:\"hljs language-graphql\",children:[(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"mutation\"}),\" discountAutomaticDelete\",(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"(\"}),(0,e.jsx)(s.span,{className:\"hljs-variable\",children:\"$id\"}),\": ID\",(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"!\"}),(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\")\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"{\"}),`\n  discountAutomaticDelete`,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"(\"}),(0,e.jsx)(s.span,{className:\"hljs-symbol\",children:\"id\"}),(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\":\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-variable\",children:\"$id\"}),\") \",(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"{\"}),`\n    deletedAutomaticDiscountId\n    userErrors `,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"{\"}),`\n      field\n      message\n    `,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"}\"}),`\n  `,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"}\"}),`\n`,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"}\"}),`\n`]})}),(0,e.jsxs)(s.p,{children:[\"With the following in the variables section, be sure to replace the \",(0,e.jsx)(s.code,{children:\"id\"}),\" with the GID from the \",(0,e.jsx)(s.em,{children:\"List\"}),\" command.\"]}),(0,e.jsx)(s.pre,{children:(0,e.jsxs)(s.code,{className:\"hljs language-json\",children:[(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"{\"}),`\n  `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:'\"id\"'}),(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\":\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"gid://shopify/DiscountAutomaticNode/1017955483704\"'}),`\n`,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"}\"}),`\n`]})}),(0,e.jsx)(s.h3,{children:\"Create a discount\"}),(0,e.jsx)(s.pre,{children:(0,e.jsxs)(s.code,{className:\"hljs language-graphql\",children:[(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"mutation\"}),\" CreateAutomaticDiscount\",(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"(\"}),(0,e.jsx)(s.span,{className:\"hljs-variable\",children:\"$discount\"}),\": DiscountAutomaticAppInput\",(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"!\"}),(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\")\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"{\"}),`\n  `,(0,e.jsx)(s.span,{className:\"hljs-symbol\",children:\"discountCreate\"}),(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\":\"}),\" discountAutomaticAppCreate\",(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"(\"}),(0,e.jsx)(s.span,{className:\"hljs-symbol\",children:\"automaticAppDiscount\"}),(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\":\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-variable\",children:\"$discount\"}),\") \",(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"{\"}),`\n    userErrors `,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"{\"}),`\n      field\n      extraInfo\n      message\n      code\n    `,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"}\"}),`\n    automaticAppDiscount `,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"{\"}),`\n      title\n      startsAt\n      endsAt\n      appDiscountType `,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"{\"}),`\n        functionId\n      `,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"}\"}),`\n    `,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"}\"}),`\n  `,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"}\"}),`\n`,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"}\"}),`\n`]})}),(0,e.jsxs)(s.p,{children:[\"With the following in the variables section, be sure to replace the \",(0,e.jsx)(s.code,{children:\"functionId\"}),\" with the ID of your function from the \",(0,e.jsx)(s.code,{children:\".env\"}),\" file.\"]}),(0,e.jsx)(s.pre,{children:(0,e.jsxs)(s.code,{className:\"hljs language-json\",children:[(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"{\"}),`\n  `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:'\"discount\"'}),(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\":\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"{\"}),`\n    `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:'\"functionId\"'}),(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\":\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"\u003cMY_VOLUME_FUNCTION_ID\u003e\"'}),(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\",\"}),`\n    `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:'\"title\"'}),(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\":\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"my functions based discount\"'}),(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\",\"}),`\n    `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:'\"startsAt\"'}),(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\":\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"2022-08-01T17:00:00Z\"'}),(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\",\"}),`\n    `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:'\"metafields\"'}),(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\":\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"[\"}),`\n      `,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"{\"}),`\n        `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:'\"namespace\"'}),(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\":\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"FUNCTION_APP\"'}),(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\",\"}),`\n        `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:'\"key\"'}),(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\":\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"volume-config\"'}),(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\",\"}),`\n        `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:'\"value\"'}),(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\":\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"{ \\\\\"quantity\\\\\": 2, \\\\\"percentage\\\\\": 10 }\"'}),(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\",\"}),`\n        `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:'\"type\"'}),(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\":\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"json\"'}),`\n      `,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"}\"}),`\n    `,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"]\"}),`\n  `,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"}\"}),`\n`,(0,e.jsx)(s.span,{className:\"hljs-punctuation\",children:\"}\"}),`\n`]})}),(0,e.jsxs)(s.dl,{children:[(0,e.jsx)(s.dt,{children:\"Positive\"}),(0,e.jsxs)(s.dd,{children:[`If you encounter a \"Function not found\" error, make sure you've updated your access scope to include `,(0,e.jsx)(s.code,{children:\"write_discounts\"}),\".\"]})]})]})}),(0,e.jsx)(s.div,{className:\"workshop-step\",children:(0,e.jsxs)(s.section,{children:[(0,e.jsx)(s.h2,{id:\"13\",children:\"Conclusion\"}),(0,e.jsx)(s.p,{children:\"Congratulations! If you've reached this step you've completed the workshop! Go forth and build something awesome!\"}),(0,e.jsx)(s.p,{children:\"To read more about Shopify Functions check out these helpful resources:\"}),(0,e.jsxs)(s.ul,{children:[`\n`,(0,e.jsx)(s.li,{children:(0,e.jsx)(s.a,{href:\"https://shopify.dev/api/functions\",children:\"Shopify Functions overview\"})}),`\n`,(0,e.jsx)(s.li,{children:(0,e.jsx)(s.a,{href:\"https://shopify.dev/api/functions/configuration\",children:\"Configuration for Shopify Functions\"})}),`\n`,(0,e.jsx)(s.li,{children:(0,e.jsx)(s.a,{href:\"https://shopify.dev/api/functions/reference/product-discounts/graphql\",children:\"Product Discount API reference\"})}),`\n`]}),(0,e.jsx)(s.p,{children:\"Or if you'd prefer to chat with others:\"}),(0,e.jsxs)(s.ul,{children:[`\n`,(0,e.jsx)(s.li,{children:(0,e.jsx)(s.a,{href:\"https://discord.com/channels/842813079926603828/984191270211698738\",children:\"#shopify-functions on Discord\"})}),`\n`,(0,e.jsx)(s.li,{children:(0,e.jsx)(s.a,{href:\"https://shopifypartners.slack.com/archives/C0225DTE1M1\",children:\"#shopify-functions on Partner Slack\"})}),`\n`]}),(0,e.jsxs)(s.dl,{children:[(0,e.jsx)(s.dt,{children:\"Positive\"}),(0,e.jsxs)(s.dd,{children:[\"To view the complete source code for this workshop, check out \",(0,e.jsx)(s.a,{href:\"https://github.com/Shopify/unite-workshop-functions-volume-discount\",children:\"this repo\"}),\".\"]})]})]})})]})]})}function k(n={}){let{wrapper:s}=n.components||{};return s?(0,e.jsx)(s,Object.assign({},n,{children:(0,e.jsx)(d,n)})):d(n)}var b=k;function o(n,s){throw new Error(\"Expected \"+(s?\"component\":\"object\")+\" `\"+n+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return w(v);})();\n;return Component;","frontmatter":{"summary":"Get familiar with Shopify Functions by creating a volume based discount, written in Rust.","id":"functions-volume-discount","status":"Published","categories":"shopify,rust,react","feedback-link":"https://github.com/Shopify/workshops","title":"Use Rust to create a Shopify Discount Function"},"trackingEnabled":true},"routes/workshops":null},"actionData":null,"errors":null},"future":{"v2_dev":false,"unstable_postcss":false,"unstable_tailwind":false,"v2_errorBoundary":false,"v2_headers":false,"v2_meta":false,"v2_normalizeFormMethod":false,"v2_routeConvention":false}};</script><script type="module" async="">import "/build/manifest-0FD511F1.js";
import * as route0 from "/build/root-TS7GWK7I.js";
import * as route1 from "/build/routes/workshops-YWZAAF22.js";
import * as route2 from "/build/routes/workshops/$workshopId-TCVFMZD7.js";
window.__remixRouteModules = {"root":route0,"routes/workshops":route1,"routes/workshops/$workshopId":route2};

import("/build/entry.client-J6TYPMOL.js");</script></body></html>